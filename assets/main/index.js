System.register("chunks:///_virtual/audioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./storageManager.ts","./resourceUtil.ts","./lodash.ts"],(function(o){"use strict";var s,i,t,u,e,n,a,r,c,d;return{setters:[function(o){s=o.createClass},function(o){i=o.cclegacy,t=o._decorator,u=o.Node,e=o.director,n=o.AudioSource,a=o.AudioClip},function(o){r=o.StorageManager},function(o){c=o.ResourceUtil},function(o){d=o.Lodash}],execute:function(){var h,l;i._RF.push({},"5e2ecZFEJFEHoCgx6lXVYHB","audioManager",void 0);var p=t.ccclass;t.property,o("AudioManager",p("AudioManager")(((l=function(){function o(){this._persistRootNode=null,this._audioSources=[],this.dictWeaponSoundIndex={},this.musicVolume=.8,this.soundVolume=1,this.audios={},this.arrSound=[]}var i=o.prototype;return i.init=function(){this._persistRootNode||(this._persistRootNode=new u("audio"),this.openAudio(),e.getScene().addChild(this._persistRootNode),e.addPersistRootNode(this._persistRootNode),this.musicVolume=this.getAudioSetting(!0)?.8:0,this.soundVolume=this.getAudioSetting(!1)?1:0)},i._getAudioSource=function(o){for(var s,i=0;i<this._audioSources.length;++i){var t=this._audioSources[i];if(!t.playing){s=t;break}}return s||((s=this._persistRootNode.addComponent(n)).playOnAwake=!1,this._audioSources.push(s)),s.node.off(n.EventType.ENDED),s.clip=o,s.currentTime=0,s},i.getAudioSetting=function(o){var s;return!(s=o?r.instance.getGlobalData("music"):r.instance.getGlobalData("sound"))||"true"===s},i.playMusic=function(o,s){var i=this,t="audio/music/"+o;c.loadRes(t,a,(function(t,u){var e=i._getAudioSource(u),n={source:e,isMusic:!0};i.audios[o]=n,e.volume=i.musicVolume,e.loop=s,e.play()}))},i.playSound=function(o,s){var i=this;if(void 0===s&&(s=!1),this.soundVolume){c.loadRes("audio/sound/"+o,a,(function(t,u){var e=i._getAudioSource(u),a={source:e,isMusic:!1};i.arrSound.push(a),s&&(i.audios[o]=a),e.volume=i.soundVolume,e.loop=s,e.play(),e.node.on(n.EventType.ENDED,(function(){d.remove(i.arrSound,(function(o){return o.source===a.source}))}))}))}},i.stop=function(o){this.audios.hasOwnProperty(o)&&this.audios[o].source.stop()},i.stopAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.stop()}},i.getMusicVolume=function(){return this.musicVolume},i.setMusic=function(o){for(var s in this.musicVolume=o,this.audios){if(this.audios.hasOwnProperty(s)&&this.audios[s].isMusic)this.audios[s].source.volume=this.musicVolume}},i.pauseAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.pause()}},i.resumeAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.play()}},i.openMusic=function(){this.setMusic(.8),r.instance.setGlobalData("music","true")},i.closeMusic=function(){this.setMusic(0),r.instance.setGlobalData("music","false")},i.openSound=function(){this.setSound(1),r.instance.setGlobalData("sound","true")},i.closeSound=function(){this.setSound(0),r.instance.setGlobalData("sound","false")},i.openAudio=function(){this.openMusic(),this.openSound()},i.closeAudio=function(){this.closeMusic(),this.closeSound()},i.setSound=function(o){for(var s in this.soundVolume=o,this.audios){if(this.audios.hasOwnProperty(s)&&!this.audios[s].isMusic)this.audios[s].source.volume=this.soundVolume}for(var i=0;i<this.arrSound.length;i++){this.arrSound[i].source.volume=this.soundVolume}},i.stopSingleSound=function(o){this.audios.hasOwnProperty(o)&&!this.audios[o].isMusic&&this.audios[o].source.stop()},s(o,null,[{key:"instance",get:function(){return this._instance||(this._instance=new o),this._instance}}]),o}())._instance=void 0,h=l))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/clientEvent.ts",["cc"],(function(r){"use strict";var n,e;return{setters:[function(r){n=r.cclegacy,e=r._decorator}],execute:function(){var t,a;n._RF.push({},"e55dbzBNn1NUrh8r5zusvCZ","clientEvent",void 0);var c=e.ccclass;e.property,r("ClientEvent",c("ClientEvent")(((a=function(){function r(){}return r.on=function(n,e,t){var a={handler:e,target:t},c=r._handlers[n];c||(c=[],r._handlers[n]=c);for(var l=0;l<c.length;l++)if(!c[l])return c[l]=a,l;return c.push(a),c.length},r.off=function(n,e,t){var a=r._handlers[n];if(a)for(var c=0;c<a.length;c++){var l=a[c];if(l.handler===e&&(!t||t===l.target)){a.splice(c,1);break}}},r.dispatchEvent=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];var c,l=r._handlers[n],i=[];for(c=1;c<arguments.length;c++)i.push(arguments[c]);if(l)for(c=0;c<l.length;c++){var h=l[c];h.handler&&h.handler.apply(h.target,i)}},r}())._handlers={},t=a))||t);n._RF.pop()}}}));

System.register("chunks:///_virtual/coinTipsManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./clientEvent.ts"],(function(n){"use strict";var e,o,i,t,s,r,a,c,p,l,u,f,h;return{setters:[function(n){e=n.applyDecoratedDescriptor,o=n.inheritsLoose,i=n.initializerDefineProperty,t=n.assertThisInitialized},function(n){s=n.cclegacy,r=n._decorator,a=n.Prefab,c=n.Vec3,p=n.LabelComponent,l=n.Tween,u=n.Component},function(n){f=n.PoolManager},function(n){h=n.ClientEvent}],execute:function(){var w,v,d,g,T;s._RF.push({},"03627MpYD9GQ5cp4Rc77nQa","coinTipsManager",void 0);var C=r.ccclass,M=r.property;n("coinTipsManager",(w=C("coinTipsManager"),v=M(a),w((T=e((g=function(n){function e(){for(var e,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return e=n.call.apply(n,[this].concat(s))||this,i(e,"pfCoinTips",T,t(e)),e}o(e,n);var s=e.prototype;return s.onEnable=function(){h.on("showCoinTips",this.showCoinTips,this)},s.onDisable=function(){h.off("showCoinTips",this.showCoinTips,this)},s.showCoinTips=function(n,e){var o=f.instance.getNode(this.pfCoinTips,this.node),i=new c;window.mainCamera.convertToUINode(e,this.node,i),o.setPosition(i);var t=o.getChildByName("num");t&&(t.getComponent(p).string=n),o.setScale(0,0,0),o.tweenMove=new l(o).to(.3,{scale:new c(1.2,1.2,1.2)}).to(.1,{scale:new c(1,1,1)}).by(.6,{position:new c(0,100,0)}).union().call((function(){o.tweenMove=null,f.instance.putNode(o)})).start()},s.recrycle=function(){var n=[];this.node.children.forEach((function(e){n.push(e)})),n.forEach((function(n){n.tweenMove&&(n.tweenMove.stop(),n.tweenMove=null),f.instance.putNode(n)}))},e}(u)).prototype,"pfCoinTips",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/constant.ts",["cc"],(function(E){"use strict";var _,A;return{setters:[function(E){_=E.cclegacy,A=E.Enum}],execute:function(){_._RF.push({},"b08f08kiOlEA7e6qUWa7AnA","constant",void 0);var O=E("Constant",(function(){}));O.GAME_NAME="Coin",O.GAME_VERSION="1.0.1",O.GAME_FRAME=60,O.GAME_INIT_FRAME=60,O.LOCAL_CACHE={PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",HISTORY:"history",BAG:"bag"},O.PTM_RATIO=1,O.GAME_OBJ_TYPE={PLAYER:1,COIN:2},O.ACTION={MOVE:1,STOP_MOVE:2,GAME_START:3,GAME_OVER:4,READY:5,HEART_BEAT:6,UPDATE_POS:8,VIBRATE:9,RUN:13,IDLE:14,IS_ATTACK_ED:12,HIT:7,ICON:15,HAMMER:16,CREATE_HAMMER:17,CREATE_ICON:18},O.NETWORK_STATUS={COMMON_OFFLINE:0,COMMON_ONLINE:1,RELAY_OFFLINE:2,RELAY_ONLINE:3},O.FRAME_SYNC_STATE={STOP:0,START:1},O.COIN_TYPE=A({COIN:1,PROP:2}),O.ADD_SIZE_PER_COIN=.03,O.MIN_SPEED_PERCENT=.2,O.INIT_MOVE_SPEED=20,O.GAME_TIME=60,O.MIN_PLAYER=2,O.MAX_PLAYER=2,O.EVENT_NAME={ON_GET_ROOM_INFO:"onGetRoomInfo",ON_RECV_SYNC:"onRecvSync",ON_GAME_READY:"onGameReady",ON_GAME_START:"onGameStart",ON_GAME_321:"onGame321",ON_GAME_END:"onGameEnd",ON_SHOW_COIN_TIPS:"showCoinTips",ON_OTHER_JOIN_ROOM:"onOtherJoinRoom",SEND_MSG:"sendMsg",SEND_MSG_HEIGHT:"sendMsgHeight",SEND_VT:"sendVt",OPEN_MEDIA:"openMedia",OPEN_CHANNEL:"openChannel",IS_TOUCH:"is_touch",GAME_INIT:"game_init",INIT_MEDIA:"init_media",INIT_CHANNEL:"init_channel",CREATE_HAMMER:"create_hammer",CREATE_COIN:"create_coin",DIS_JOIN:"dis_join",OPEN_PGS:"openPgs",HUAWEI_LOGIN_MSG:"huawei_login_msg"},O.PANEL_NAME={READY:"fight/ready",GAME_OVER:"fight/gameOver",FIGHT_UI:"fight/fightUI",READY_GO:"fight/readyGo",START_GAME:"fight/startPanel",SELECT_GAME:"fight/selectPanel",TIP_PANEL:"fight/tipPanel",JOIN_ROOM_PANEL:"fight/joinRoomPanel",MATCH_PANEL:"fight/matchPanel",TRANSITION:"fight/transitionPanel",TRANSITION_BG:"fight/transitionBgPanel",MESSAGE_PANEL:"fight/messagePanel",DOWNOFF_PANEL:"fight/downOffPanel",MEDIA_PANEL:"fight/mediaPanel"},O.SCENE_NAME={FIGHT:"fight",START:"start",SLECT:"select"},O.AUDIO_NAME={BACKGROUND:"background",WIN:"win",GO:"go",TICK:"tick",TIME_OUT:"timeout",GOLD:"gold",HIT:"hit"},O.EFFECT_NAME={RUNNING:"running",WIN:"leaveWinAni",TRANSITION:"transition07"},O.PROP_TYPE={TO_SELF:"toSelf",TO_ENEMY:"toEnemy"},O.ANI_TYPE={IDLE:"idle",RUN:"run",RUN_1:"run1",VICTORY:"victory",LOSE:"lose",LOSE_1:"lose1",ATTACK:"attack",HIT:"hit",DIZZY:"dizzy"},O.EASY_TOUCH={TOUCH_LEFT_X:"touchLeftX",TOUCH_LEFT_Y:"touchLeftY",TOUCH_RIGHT_X:"touchRightX",TOUCH_RIGHT_Y:"touchRightY"},O.PROP_DISAPPEAR_TIME=10,O.READY_PREFAB={GIRL_MODEL:"fight/girlUI",BOY_MODEL:"fight/boyUI",JOIN_EFFECT:"joinEff",VS_EFFECT:"vsAni"},O.ROOM_TIPS={CREATE:"创建房间。。。",WAITING:"请稍等，房主正在创建房间。。。",LEAVE:"您的对手已经离开房间。。。",IN_ROOM:"已在房间内。。。",CREATE_ROOM_ERROR:"创建房间失败",JOIN_ROOM_ERROR:"加入房间失败",NO_ROOM_ID:"请输入正确的房间号",LEAVE_ROOM_ERROR:"离开房间出错",LEAVE_ROOM_MSG:"确认退出房间？",LEAVE_ROOM_SUCCESS:"成功离开房间",JOIN_ROOM_SUCCESS:"成功加入房间",MATCH_ROOM_ERROR:"匹配房间出错",PLAYER_LENGHT_ERROR:"长度需要大于2",LEAVE_GAME:"是否退出游戏？",INPUT_MSG:"请输入文字",VT_ERROR:"未识别到语音",PLAYER_LEAVE_1:"队友离开队伍，",PLAYER_LEAVE_2:"秒游戏结束",INIT_FAIL:"登录失败",MEDIA_FAIL:"语音权限不足，语音未开启",WORLD_LABEL:"世界频道",ROOM_LABEL:"房间号:",LOGIN_GAME_ERROR:"进入场景异常，请重试",HUA_WEI_LOAGIN_ERROR:"华为登录失败，请改用普通账号登录"},O.PLAYER_ORIGIN_SCALE=1.5,O.WORLD_ID="cocosworldid00000",O.DIZZY_TIME=1,O.HAMMER_TIME=15,O.AUTO_GEN_COIN={SECOND_PER_TIMES:1,COIN_PER_TIMES:1,START_NUM:10,END_NUM:20},O.REVIVE_TIME=.5,O.INIT_COLLIDER_CIRCLE=.8,O.HAMMER_TIMES=1,O.AI_PLAYER_ID="ai00000",O.AI_PLAYER=1,O.HAMMER_POS=[[0,0,0],[-28,0,-25],[28,0,-25],[23,0,23],[-28,0,23]],O.AI_SPEED=.22,O.AI_POS_INDEX=[[1,26,27,19],[2,26,19],[1,3,22],[2,4,23],[3,24,5],[6,25,4],[5,7,20],[25,8,23,6],[10,11,18,17],[23,22],[13,11,18,9],[10,17,12,28],[11,16,13],[10,12,15],[13,15,16,12],[18,16,28,9],[15,17,28,9],[18,16,28,9],[15,17,28,9],[1,27,20],[6,21,19],[7,14,22,20],[23,2,14,21,2],[7,8,22,3,4],[25,23],[7,24],[27,19,22],[21,26,19],[7,21]],O.HUAWEI_LOGIN={SIGN_IN_SUCCESS:0,INIT_SUCCESS:1e4,INIT_UNDER_AGE:10001,INIT_ERROR:10002,SIGN_IN_ERROR:10003,NO_HUAWEI:10004},O.START_GAME="startGame",O.DISMISS="dismiss",O.START_GAME_TIME="start_game_time",_._RF.pop()}}}));

System.register("chunks:///_virtual/csvManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy,n=e._decorator}],execute:function(){var i,s;r._RF.push({},"d7554BuqnJLAKibwVUWte5P","csvManager",void 0);var u=n.ccclass,a=(n.property,[",",";","\t","|","^"]),o=["\r\n","\r","\n"],l=function(e,t,r,n){return r instanceof Array?"number"===r[t]?Number(n[t]):"boolean"===r[t]?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:Number(n[t])},c={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:a[0],newline:o[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,assign:function(){for(var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1),n=0,i=r.length;n<i;n++)for(var s in r[n])t[s]=r[n][s];return t},map:function(e,t){for(var r=[],n=0,i=e.length;n<i;n++)r[n]=t(e[n],n);return r},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:e},buildObjectConstructor:function(e,t,r){return function(n){var i=new Object,s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,l(t[i],i,r,n))})):e.forEach((function(e,r){s(e,l(t[r],r,null,n))})),i}},buildArrayConstructor:function(e,t,r){return function(n){var i=new Array(t.length),s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,l(t[i],i,r,n))})):e.forEach((function(e,r){s(e,l(t[r],r,null,n))})),i}},frequency:function(e,t,r){void 0===r&&(r=!1);for(var n=0,i=0,s=this.getLimit(r,e.length);i<s&&-1!==(i=e.indexOf(t,i));)i+=1,n++;return n},mostFrequent:function(e,t,r){for(var n,i=t.length-1;i>=0;i--)this.frequency(e,t[i],r)>0&&(n=t[i]);return n||t[0]},unsafeParse:function(e,t,r){var n,i,s=e.split(t.newline);function u(e){var r=e.shift();if(r.indexOf('"')>=0){for(var n=0,i=0,s=0;e.length>0&&(-1!==(n=r.indexOf('"',i))||s%2!=0);)-1!==n?(i=n+1,s++):r=r+t.newline+e.shift();var u,a=[],o=0,l=0,c=0,h=r.length;for(var f in r)if(r.hasOwnProperty(f)){var d=parseInt(f),v=r[f];0===d&&'"'===v&&(o++,l=1),'"'===v&&(o++,r[d-1]===t.delimiter&&l===d&&l++),'"'===v&&o%2==0&&(r[d+1]!==t.delimiter&&d+1!==h||(c=d,u=r.substring(l,c),a.push(u),c=l=c+2)),v===t.delimiter&&o%2==0&&((c=d)>l?(u=r.substring(l,c),a.push(u),c=l=c+1):c===l&&(a.push(""),c=l=c+1))}return(c=h)>=l&&(u=r.substring(l,c),a.push(u)),a}return r.split(t.delimiter)}for(t.skip>0&&s.splice(t.skip),t.header?(!0===t.header?(t.comment=u(s),t.cast=u(s),n=u(s)):"Array"===this.getType(t.header)&&(n=t.header),i=this.buildObjectConstructor(n,s[0].split(t.delimiter),t.cast)):i=this.buildArrayConstructor(n,s[0].split(t.delimiter),t.cast);s.length>0;){var a=u(s);a.length>1&&r(i(a),n[0])}return!0},safeParse:function(e,t,r){t.delimiter;var n=t.newline,i=e.split(n);return t.skip>0&&i.splice(t.skip),!0},encodeCells:function(e,t,r){for(var n=e.slice(0),i=0,s=n.length;i<s;i++)-1!==n[i].indexOf(this.quoteMark)&&(n[i]=n[i].replace(this.quoteRegex,this.doubleQuoteMark)),-1===n[i].indexOf(t)&&-1===n[i].indexOf(r)||(n[i]=this.quoteMark+n[i]+this.quoteMark);return n.join(t)},encodeArrays:function(e,t,r){var n=t.delimiter,i=t.newline;t.header&&"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,n,i));for(var s=0,u=this.getLimit(t.limit,e.length);s<u;s++)r(this.encodeCells(e[s],n,i));return!0},encodeObjects:function(e,t,r){var n,i,s=t.delimiter,u=t.newline;for(var a in n=[],i=[],e[0])n.push(a),i.push(e[0][a]);!0===t.header?r(this.encodeCells(n,s,u)):"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,s,u)),r(this.encodeCells(i,s));for(var o=1,l=this.getLimit(t.limit,e.length);o<l;o++){i=[];for(var c=0,h=n.length;c<h;c++)i.push(e[o][n[c]]);r(this.encodeCells(i,s,u))}return!0},parse:function(e,t,r){var n;if("Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)?r=(n=[]).push.bind(n):n=[],t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){var i=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,a,i),t.newline=t.newline||this.mostFrequent(e,o,i)}return this.unsafeParse(e,t,r)&&(!(n.length>0)||n)},encode:function(e,t,r){var n;return"Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)&&(r=(n=[]).push.bind(n)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,r)&&(!(n.length>0)||n.join(t.newline))}};e("CSVManager",u("CSVManager")(((s=function(){function e(){this._csvTables={},this._csvTableForArr={},this._tableCast={},this._tableComment={}}var r=e.prototype;return r.addTable=function(e,t,r){if(!this._csvTables[e]||r){var n={},i=[];c.parse(t,{header:!0},(function(e,t){n[e[t]]=e,i.push(e)})),this._tableCast[e]=c.opts.cast,this._tableComment[e]=c.opts.comment,this._csvTables[e]=n,this._csvTableForArr[e]=i}},r.getTableArr=function(e){return this._csvTableForArr[e]},r.getTable=function(e){return this._csvTables[e]},r.queryOne=function(e,t,r){var n=this.getTable(e);if(!n)return null;if(!t)return n[r];for(var i in n)if(n.hasOwnProperty(i)&&n[i][t]===r)return n[i]},r.queryByID=function(e,t){return this.queryOne(e,null,t)},r.queryAll=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;var i={};for(var s in n)n.hasOwnProperty(s)&&n[s][t]===r&&(i[s]=n[s]);return i},r.queryIn=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;for(var i={},s=Object.keys(n),u=s.length,a=0;a<u;a++){var o=n[s[a]];r.indexOf(o[t])>-1&&(i[s[a]]=o)}return i},r.queryByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;for(var n={},i=Object.keys(r),s=i.length,u=Object.keys(t),a=u.length,o=0;o<s;o++){for(var l=r[i[o]],c=!0,h=0;h<a;h++){var f=u[h];c=c&&t[f]===l[f]&&!n[i[o]]}c&&(n[i[o]]=l)}return n},r.queryOneByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;var n=Object.keys(t),i=n.length;for(var s in r){for(var u=r[s],a=!0,o=0;o<i;o++){var l=n[o];a=a&&t[l]===u[l]}if(a)return u}return null},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,i=s))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,s,l,r,a,g,h,c,p,C,d,m,u,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,c=t.instantiate,p=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,T=t.Component}],execute:function(){var L,f,M,b,v,x,E,S,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(L=A("internal.DebugViewRuntimeControl"),f=y(r),M=y(r),b=y(r),L((E=e((x=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",E,n(e)),i(e,"singleModeToggle",S,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct TRT","Env TRT","TRT All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","TRT","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=c(s);l.parent=this.node,l.name="Buttons";var r=c(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var T=c(this.EnableAllCompositeModeButton.getChildByName("Label"));T.setPosition(i+(u>0?450:150),n,0),T.setScale(.75,.75,.75),T.parent=r;var L=T.getComponent(p);L.string=u?"----------Composite Mode----------":"----------Single Mode----------",L.color=a.WHITE,L.overflow=0,this.labelComponentList[this.labelComponentList.length]=L}n-=20;for(var f=0,M=0;M<this.strSingle.length;M++,f++){M===this.strSingle.length>>1&&(i+=200,f=0);var b=M?c(this.singleModeToggle):this.singleModeToggle;b.setPosition(i,n-20*f,0),b.setScale(.5,.5,.5),b.parent=this.singleModeToggle.parent;var v=b.getComponentInChildren(C);v.string=this.strSingle[M],this.textComponentList[this.textComponentList.length]=v,this.textContentList[this.textContentList.length]=v.string,b.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[M]=b}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var x=this.EnableAllCompositeModeButton.getComponentInChildren(p);this.labelComponentList[this.labelComponentList.length]=x;var E=c(this.EnableAllCompositeModeButton);E.setPosition(i+90,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.changeTextColor,this),E.parent=l,(x=E.getComponentInChildren(p)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=x;var S=c(this.EnableAllCompositeModeButton);S.setPosition(i+200,n,0),S.setScale(.5,.5,.5),S.on(m.EventType.CLICK,this.hideUI,this),S.parent=this.node.parent,(x=S.getComponentInChildren(p)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=x,this.hideButtonLabel=x,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=c(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?c(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(T)).prototype,"compositeModeToggle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(x.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(x.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=x))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/displayManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./uiManager.ts","./audioManager.ts","./poolManager.ts","./constant.ts","./fighter.ts","./gameState.ts","./logicManager.ts","./gobeUtil.ts","./resourceUtil.ts","./propBase.ts","./gameCamera.ts"],(function(e){"use strict";var n,t,a,i,o,r,s,c,l,p,u,f,d,h,E,g,_,y,P,N,m,M;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Node,c=e.Prefab,l=e.Animation,p=e.Component},function(e){u=e.ClientEvent},function(e){f=e.UIManager},function(e){d=e.AudioManager},function(e){h=e.PoolManager},function(e){E=e.Constant},function(e){g=e.Fighter},function(e){_=e.PropType},function(e){y=e.LogicManager},function(e){P=e.GobeUtil},function(e){N=e.ResourceUtil},function(e){m=e.PropBase},function(e){M=e.GameCamera}],execute:function(){var A,v,G,b,C,I,O,R,D,S,w,L,T,U,z,V,Y;o._RF.push({},"e542d/3GJRLWYGHcJyxlKkU","displayManager",void 0);var k=r.ccclass,F=r.property;e("DisplayManager",(A=k("DisplayManager"),v=F(y),G=F(s),b=F(s),C=F(c),I=F(c),O=F(M),R=F(s),A((w=n((S=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,a(n,"logicManager",w,i(n)),a(n,"playerGroupNode",L,i(n)),a(n,"propGroupNode",T,i(n)),a(n,"coinPrefab",U,i(n)),a(n,"hammerPrefab",z,i(n)),a(n,"cameraManager",V,i(n)),a(n,"aiPosNode",Y,i(n)),n.dicPlayers={},n._dicProps={},n._isGameOver=!1,n}t(n,e);var o=n.prototype;return o.start=function(){this.reset()},o.onEnable=function(){u.on(E.EVENT_NAME.ON_GAME_READY,this._onGameReady,this),u.on(E.EVENT_NAME.ON_GAME_END,this._onGameEnd,this),u.on(E.EVENT_NAME.ON_GAME_321,this._gameStart,this),u.on(E.EVENT_NAME.CREATE_COIN,this._onCreateCoin,this)},o.onDisable=function(){u.off(E.EVENT_NAME.ON_GAME_READY,this._onGameReady,this),u.off(E.EVENT_NAME.ON_GAME_END,this._onGameEnd,this),u.off(E.EVENT_NAME.ON_GAME_321,this._gameStart,this),u.off(E.EVENT_NAME.CREATE_COIN,this._onCreateCoin,this)},o._onCreateCoin=function(e){this.logicManager.onCreateCoin(e),this.dropCoin()},o._init=function(){var e=this;this._isGameOver=!1;var n=Object.keys(this.dicPlayers);n.forEach((function(n){h.instance.putNode(e.dicPlayers[parseInt(n)]),delete e.dicPlayers[parseInt(n)]})),(n=Object.keys(this._dicProps)).forEach((function(n){h.instance.putNode(e._dicProps[parseInt(n)]),delete e._dicProps[parseInt(n)]})),this.logicManager.currentGameState.props.forEach((function(n,t){e._dicProps[t]=e._createProp(n)}))},o._createProp=function(e){var n,t=this.coinPrefab;e.type===_.HAMMER&&(t=this.hammerPrefab);var a=h.instance.getNode(t,this.propGroupNode);return a.setPosition(e.position),null==(n=a.getComponent(m))||n.show(e),a},o.updateOwnState=function(e,n){var t=this;e.players.forEach((function(e,a){if(e.channel.openId==P.instance.ownPlayerId)t.dicPlayers[a].getComponent(g).playMove(t.logicManager,n,0==a?t.dicPlayers[1]:t.dicPlayers[0],e);else if(P.instance.isAi){t.dicPlayers[a].getComponent(g).playMoveAi(t.logicManager,n,0==a?t.dicPlayers[1]:t.dicPlayers[0],e)}}))},o.updateRun=function(e,n){var t=this;n.players.forEach((function(n,a){n.channel.openId==e&&t.dicPlayers[a].getComponent(g).playRun()}))},o.updateIdle=function(e,n){var t=this;n.players.forEach((function(n,a){n.channel.openId==e&&t.dicPlayers[a].getComponent(g).playIdle()}))},o.updateStateRecovery=function(e){var n=this,t=e.players;t.forEach((function(e,a){var i=n.dicPlayers[a];e=t[a];i&&(e.channel?(i.active=!0,i.getComponent(g).updateStateRecovery(e)):i&&(i.active=!1))}))},o.updateProp=function(e){var n=this;e.props.forEach((function(e,t){var a=n._dicProps[t];a&&!e.exist&&(h.instance.putNode(a),delete n._dicProps[t])}))},o.updateState=function(e,n,t){var a=this,i=n.players;i.forEach((function(n,o){var r=a.dicPlayers[o];n=i[o];r&&(n.channel?(r.active=!0,r.getComponent(g).updateState(e,n,t)):r&&(r.active=!1))})),n.props.forEach((function(n,t){var i=a._dicProps[t];if(i&&!n.exist&&(h.instance.putNode(i),delete a._dicProps[t]),i||!n.exist||n.dropPosition||(a._dicProps[t]=a._createProp(n)),i){var o=i.getComponent(m);null==o||o.updateState(e,n)}}))},o._gameStart=function(){var e,n=this;this.logicManager.checkIsReCovery(),f.instance.showDialog(E.PANEL_NAME.MEDIA_PANEL),null==(e=this.cameraManager.node.getComponent(l))||e.play(),f.instance.showDialog(E.PANEL_NAME.READY_GO,[function(){P.instance.startGame(),d.instance.playMusic(E.AUDIO_NAME.BACKGROUND,!0),f.instance.showDialog(E.PANEL_NAME.FIGHT_UI,[n]),P.instance.checkIsRoomOwner(P.instance.ownPlayerId)?n.cameraManager.init(n.dicPlayers[0]):n.cameraManager.init(n.dicPlayers[1]),n.cameraManager.startGame()}])},o.reset=function(){this.logicManager.setDefaultGameState(),this._init()},o._onGameEnd=function(){var e=this;if(!this._isGameOver){this.cameraManager.finishGame(),this._isGameOver=!0,f.instance.hideDialog(E.PANEL_NAME.FIGHT_UI),d.instance.playSound(E.AUDIO_NAME.TIME_OUT);var n=-1,t=this.logicManager.currentGameState.players;for(var a in t[0].score<t[1].score?n=1:t[0].score>t[1].score&&(n=0),this.dicPlayers){if(Object.prototype.hasOwnProperty.call(this.dicPlayers,a))this.dicPlayers[a].getComponent(g).showFighterGameOverAni(-1==n||n===Number(a))}this.scheduleOnce((function(){f.instance.hideDialog(E.PANEL_NAME.MESSAGE_PANEL),f.instance.hideDialog(E.PANEL_NAME.READY_GO),f.instance.hideDialog(E.PANEL_NAME.FIGHT_UI),f.instance.showTransitionBg((function(){f.instance.showDialog(E.PANEL_NAME.GAME_OVER,[e,n],(function(){}),!0)}))}),1.5)}},o._onGameReady=function(){var e=this;this.logicManager.currentGameState.players.forEach((function(n,t){if(n.channel){var a="player/girl";P.instance.checkIsRoomOwner(n.channel.openId)&&(a="player/boy"),N.loadModelRes(a).then((function(a){var i,o=h.instance.getNode(a,e.playerGroupNode);o.setPosition(n.position),o.setScale(E.PLAYER_ORIGIN_SCALE,E.PLAYER_ORIGIN_SCALE,E.PLAYER_ORIGIN_SCALE),o.eulerAngles=n.eulerAngles,null==(i=o.getComponent(g))||i.init(e,e.aiPosNode),e.dicPlayers[t]=o}))}}))},o.dropCoin=function(){var e=this;this.logicManager.currentGameState.props.forEach((function(n,t){var a;!e._dicProps[t]&&n.exist&&n.dropPosition&&(e._dicProps[t]=e._createProp(n),null==(a=e._dicProps[t].getComponent(m))||a.drop(n.dropPosition))}))},n}(p)).prototype,"logicManager",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(S.prototype,"playerGroupNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(S.prototype,"propGroupNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(S.prototype,"coinPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(S.prototype,"hammerPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(S.prototype,"cameraManager",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(S.prototype,"aiPosNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=S))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/down_off_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./constant.ts","./gobeUtil.ts"],(function(n){"use strict";var t,o,e,c,s,i,r;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,e=n._decorator,c=n.Component},function(n){s=n.UIManager},function(n){i=n.Constant},function(n){r=n.GobeUtil}],execute:function(){var a;o._RF.push({},"83f5c943sxC+r+7me9coft9","down_off_panel",void 0);var u=e.ccclass;e.property,n("DownOffPanel",u("DownOffPanel")(a=function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var e=o.prototype;return e.show=function(){},e.onCancel=function(){r.instance.leaveGame(),s.instance.showTransition(i.SCENE_NAME.SLECT)},o}(c))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/easy_touch_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./easy_touch.ts","./clientEvent.ts"],(function(t){"use strict";var i,o,h,e,s,n,c,a,u,r,T,_,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,h=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){s=t.cclegacy,n=t._decorator,c=t.view,a=t.input,u=t.Input,r=t.Component},function(t){T=t.Constant},function(t){_=t.EasyTouch},function(t){l=t.ClientEvent}],execute:function(){var f,v,y,d,g,E,M;s._RF.push({},"e1f2aKMO/JJx5GxxcZBuw7d","easy_touch_panel",void 0);var p=n.ccclass,I=n.property;t("EasyTouchPanel",(f=p("EasyTouchPanel"),v=I(_),y=I(_),f((E=i((g=function(t){function i(){for(var i,o=arguments.length,s=new Array(o),n=0;n<o;n++)s[n]=arguments[n];return i=t.call.apply(t,[this].concat(s))||this,h(i,"leftEasyTouch",E,e(i)),h(i,"rightEasyTouch",M,e(i)),i._startLeftMoveX=0,i._startLeftMoveY=0,i._startRightMoveX=0,i._startRightMoveY=0,i._canvasMidWidth=0,i._canvasMidHeight=0,i._leftTouchId=-1,i._rightTouchId=-1,i}o(i,t);var s=i.prototype;return s.start=function(){var t=c.getVisibleSize(),i=Math.round(t.width),o=Math.round(t.height);this._canvasMidWidth=.5*i,this._canvasMidHeight=.5*o},s.onEnable=function(){l.on(T.EVENT_NAME.GAME_INIT,this._init,this),a.on(u.EventType.TOUCH_START,this._onTouchStart,this),a.on(u.EventType.TOUCH_MOVE,this._onTouchMove,this),a.on(u.EventType.TOUCH_END,this._onTouchEnd,this)},s.onDisable=function(){a.off(u.EventType.TOUCH_START,this._onTouchStart,this),a.off(u.EventType.TOUCH_MOVE,this._onTouchMove,this),a.off(u.EventType.TOUCH_END,this._onTouchEnd,this)},s._onTouchStart=function(t){var i=t.touch,o=i.getUIStartLocation().x,h=i.getUIStartLocation().y;o<this._canvasMidWidth?(this._startLeftMoveX=o,this._startLeftMoveY=h,this._leftTouchId=i.getID(),this.leftEasyTouch.startTouch(o-this._canvasMidWidth,h-this._canvasMidHeight)):(this._startRightMoveX=o,this._startRightMoveY=h,this._rightTouchId=i.getID(),this.rightEasyTouch.startTouch(o-this._canvasMidWidth,h-this._canvasMidHeight))},s._onTouchMove=function(t){for(var i=t.getTouches(),o=0;o<i.length;o++){var h=i[o],e=h.getUILocation();h.getID()==this._leftTouchId?this.leftEasyTouch.moveTouch(h.getUILocation().x-this._startLeftMoveX,h.getUILocation().y-this._startLeftMoveY):h.getID()==this._rightTouchId&&this.rightEasyTouch.moveTouch(e.x-this._startRightMoveX,e.y-this._startRightMoveY)}},s._init=function(){this._leftTouchId=-1,this.leftEasyTouch.endTouch(),this.leftEasyTouch.moveTouchByXY(0,0)},s._onTouchEnd=function(t){t.touch.getID()==this._leftTouchId?(this._leftTouchId=-1,this.leftEasyTouch.endTouch(),this.leftEasyTouch.moveTouchByXY(0,0)):(this._rightTouchId=-1,this.rightEasyTouch.endTouch(),this.rightEasyTouch.moveTouchByXY(0,0)),-1==this._leftTouchId&&this._rightTouchId},i}(r)).prototype,"leftEasyTouch",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(g.prototype,"rightEasyTouch",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/easy_touch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./util.ts","./playerData.ts"],(function(t){"use strict";var e,i,n,s,o,a,c,r,h,u,l,_,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.Node,r=t.CCInteger,h=t.Vec3,u=t.Component},function(t){l=t.Constant},function(t){_=t.Util},function(t){T=t.PlayerData}],execute:function(){var d,f,g,p,v,y,C,b,E,H;o._RF.push({},"2ab5dN73ONFzrjGJHR3u3Av","easy_touch",void 0);var L=a.ccclass,Y=a.property;t("EasyTouch",(d=L("EasyTouch"),f=Y(c),g=Y(c),p=Y(r),d((C=e((y=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"centerCircleNode",C,s(e)),n(e,"directionNode",b,s(e)),n(e,"bgLength",E,s(e)),n(e,"isLeftTouch",H,s(e)),e._vec3_1=new h,e._lastPos=new h,e._vec3_Angle=new h(0,0,0),e._lastX=0,e._lastY=0,e}i(e,t);var o=e.prototype;return o.start=function(){var t=this;this.directionNode.active=!1,setTimeout((function(){t._lastPos.set(t.node.position)}))},o.startTouch=function(t,e){this.node.setPosition(new h(t,e)),this.directionNode.active=!1},o.endTouch=function(){this.node.setPosition(this._lastPos),this.directionNode.active=!1,this.isLeftTouch?(T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_LEFT_X,0),T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_LEFT_Y,0)):(T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_RIGHT_X,0),T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_RIGHT_Y,0))},o.moveTouch=function(t,e){var i=Math.sqrt(t*t+e*e);if(i>this.bgLength){var n=this.bgLength/i;t*=n,e*=n,this._vec3_1.set(t,e,0),this.centerCircleNode.setPosition(this._vec3_1)}else this._vec3_1.set(t,e,0),this.centerCircleNode.setPosition(this._vec3_1);var s=180*Math.atan(t/e)/Math.PI;e<0&&(s-=180),this._vec3_Angle.set(0,0,-1*s),this.directionNode.eulerAngles=this._vec3_Angle,this.directionNode.active=!0,this.isLeftTouch?(T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_LEFT_X,t/this.bgLength),T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_LEFT_Y,e/this.bgLength)):(T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_RIGHT_X,t/this.bgLength),T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_RIGHT_Y,e/this.bgLength))},o.setLastXY=function(t,e){this._lastX=t,this._lastY=e},o.moveTouchByXY=function(t,e){t=.1*Math.ceil(10*t),e=.1*Math.ceil(10*e),this._lastX=_.lerp(this._lastX,t,.1),this._lastY=_.lerp(this._lastY,e,.1),this._vec3_1.set(this._lastX*this.bgLength,this._lastY*this.bgLength,0),this.centerCircleNode.setPosition(this._vec3_1);var i=180*Math.atan(t/e)/Math.PI;e<0&&(i-=180),this._vec3_Angle.set(0,0,-1*i),this.directionNode.eulerAngles=this._vec3_Angle},e}(u)).prototype,"centerCircleNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(y.prototype,"directionNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(y.prototype,"bgLength",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=e(y.prototype,"isLeftTouch",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=y))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/effectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./resourceUtil.ts"],(function(n){"use strict";var e,t,o,i,a,r,l,c,s,u,d,f;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy,o=n._decorator,i=n.Vec3,a=n.AnimationComponent,r=n.ParticleSystemComponent,l=n.find,c=n.Node,s=n.director,u=n.AnimationClip},function(n){d=n.PoolManager},function(n){f=n.ResourceUtil}],execute:function(){var p,v;t._RF.push({},"554baRvdXVCaZZeXFSvvApe","effectManager",void 0);var h=o.ccclass;o.property,n("EffectManager",h("EffectManager")(((v=function(){function n(){this._ndParent=null}var t=n.prototype;return t.playAni=function(n,e,t,o,r,l,c){var s=this;void 0===t&&(t=new i),void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===l&&(l=1),void 0===c&&(c=function(){});var p=n.split("/")[1],v=this.ndParent.getChildByName(p),h=function(){var n,i,s;null==(n=v)||n.setScale(l,l,l),null==(i=v)||i.setWorldPosition(t);var f=null==(s=v)?void 0:s.getComponent(a);f.play(e);var p=f.getState(e);p&&(p.wrapMode=o?u.WrapMode.Loop:u.WrapMode.Normal),f.once(a.EventType.FINISHED,(function(){c&&c(),r&&v&&d.instance.putNode(v)}))};v?h():f.loadEffectRes(n).then((function(n){(v=d.instance.getNode(n,s.ndParent)).setScale(l,l,l),v.setWorldPosition(t),h()}))},t.removeEffect=function(n,e){void 0===e&&(e=this.ndParent);var t=e.getChildByName(n);t&&(t.getComponentsInChildren(a).forEach((function(n){n.stop()})),(null==t?void 0:t.getComponentsInChildren(r)).forEach((function(n){null==n||n.clear(),null==n||n.stop()})),d.instance.putNode(t))},t.playParticle=function(n,e,t,o,i,a){var l=this;void 0===t&&(t=0),void 0===o&&(o=1),f.loadEffectRes(n).then((function(n){var c=d.instance.getNode(n,l.ndParent);c.setScale(o,o,o),c.setWorldPosition(e),i&&(c.eulerAngles=i);var s=0;c.getComponentsInChildren(r).forEach((function(n){n.simulationSpeed=1,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var e=n.duration;s=e>s?e:s})),setTimeout((function(){c.parent&&(a&&a(),d.instance.putNode(c))}),1e3*(t&&t>0?t:s))}))},t.playEffect=function(n,e,t,o,i,l,c,s,u,p){void 0===t&&(t=!0),void 0===o&&(o=!0),void 0===i&&(i=0),void 0===l&&(l=1),void 0===u&&(u=!0),n&&n.parent&&f.loadEffectRes(e).then((function(e){var f=d.instance.getNode(e,n);f.setScale(l,l,l),c&&f.setPosition(c),s&&(f.eulerAngles=s);var v=0;if(t){var h=f.getComponentsInChildren(a);h.length&&h.forEach((function(n,e){var t;null==n||n.play();var o=null==n||null==(t=n.defaultClip)?void 0:t.name;if(o){var i=n.getState(o);if(i){i.time=0,i.sample();var a=i.duration;v=a>v?a:v,i.speed=1}}}))}if(o){var g=f.getComponentsInChildren(r);g.length&&g.forEach((function(n){n.simulationSpeed=1,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var e=n.duration;v=e>v?e:v}))}setTimeout((function(){f.parent&&(p&&p(),u?d.instance.putNode(f):f.destroy())}),1e3*(i&&i>0?i:v))}))},t.playTrail=function(n,e,t,o){void 0===e&&(e=0),void 0===o&&(o=1);var i=0;(n.active||(n.active=!0),n.getComponentsInChildren(r).forEach((function(n){n.simulationSpeed=o,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var e=n.duration;i=e>i?e:i})),t)&&setTimeout((function(){t()}),1e3*(e&&e>0?e:i))},t.playDisappearEff=function(n,e,t){var o=this;f.loadEffectRes(n).then((function(n){var i=d.instance.getNode(n,o.ndParent);i.setWorldPosition(e);var a=0;i.getComponentsInChildren(r).forEach((function(n){n.simulationSpeed=1,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var e=n.duration;a=e>a?e:a})),setTimeout((function(){i&&i.parent&&d.instance.putNode(i)}),1e3*a),t&&t((function(){i&&i.parent&&d.instance.putNode(i)}))}))},e(n,[{key:"ndParent",get:function(){if(!this._ndParent){var n,e=l("effectManager");if(e)this._ndParent=e;else this._ndParent=new c("effectManager"),null==(n=s.getScene())||n.addChild(this._ndParent)}return this._ndParent}}],[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,p=v))||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/fighter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./audioManager.ts","./poolManager.ts","./resourceUtil.ts","./constant.ts","./fighterModel.ts","./gameState.ts","./effectManager.ts","./util.ts","./playerData.ts","./gobeUtil.ts"],(function(t){"use strict";var e,i,n,s,o,a,h,l,c,r,_,d,p,u,v,f,m,y,g,I,P,A,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,h=t.Vec3,l=t.Node,c=t.SkinningModelComponent,r=t.Mat4,_=t.ParticleSystemComponent,d=t.Component},function(t){p=t.ClientEvent},function(t){u=t.AudioManager},function(t){v=t.PoolManager},function(t){f=t.ResourceUtil},function(t){m=t.Constant},function(t){y=t.FighterModel},function(t){g=t.PropType},function(t){I=t.EffectManager},function(t){P=t.Util},function(t){A=t.PlayerData},function(t){E=t.GobeUtil}],execute:function(){var T,x,M,S,N,C,k,H,w,O,R;o._RF.push({},"b2fbborwrBDgI638NJyrejc","fighter",void 0);var z,b=a.ccclass,D=a.property;!function(t){t[t.null=0]="null",t[t.idle=1]="idle",t[t.run=2]="run",t[t.attack=3]="attack",t[t.is_attack=4]="is_attack",t[t.game_over=5]="game_over"}(z||(z={}));var L=new h,W=new h;new h,t("Fighter",(T=b("Fighter"),x=D(l),M=D(c),S=D(y),N=D(l),T((H=e((k=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"ndSocketCrown",H,s(e)),n(e,"model",w,s(e)),n(e,"fighterModel",O,s(e)),n(e,"ndSocketWeapon",R,s(e)),e._aiPosNode=null,e.playerState=null,e._ndCrown=null,e._ndHammer=null,e._isPlayRunningEffect=!1,e._runEffect=null,e._score=0,e._mat=new r,e._ndHammerTrial=null,e._parent=null,e.vec3_pos=new h,e.vec3_angle=new h,e.vec3_lastPos=new h,e.vec3_pos_1=new h,e._moveIndex=0,e._playType=z.null,e._aiPosIndex=0,e._nextIndex=0,e._lastIndex=0,e._posPer=0,e}i(e,t);var o=e.prototype;return o.init=function(t,e){var i=this;this._aiPosNode=e,this._parent=t,this._isPlayRunningEffect=!1,this._runEffect=null,this._score=0,this._aiPosIndex=0,this.playIdle(),this._ndCrown?this.ndSocketCrown.active=!1:f.loadModelRes("crown/crown").then((function(t){i._ndCrown=v.instance.getNode(t,i.ndSocketCrown),i.ndSocketCrown.active=!1})),this._ndHammer?(this.ndSocketWeapon.active=!1,this._hideHammerTrial()):f.loadModelRes("hammer/hammerProp").then((function(t){i._ndHammer=v.instance.getNode(t,i.ndSocketWeapon),i._ndHammer.setPosition(0,0,0),i.ndSocketWeapon.active=!1,i._hideHammerTrial()})),this.vec3_pos.set(0,0,0),this.vec3_angle.set(0,0,0),this.vec3_lastPos.set(0,0,0),this.vec3_pos_1.set(0,0,0),this._lastIndex=0,L.set(50,0,0);var n=Math.floor(Math.random()*m.AI_POS_INDEX[this._lastIndex].length);this._nextIndex=m.AI_POS_INDEX[this._lastIndex][n],W.set(this._aiPosNode.children[this._nextIndex-1].position);var s=h.distance(L,W);this._posPer=m.AI_SPEED/s},o._hideHammerTrial=function(){this._ndHammer&&(this._ndHammerTrial||(this._ndHammerTrial=this._ndHammer.getChildByName("trail01")),this._ndHammerTrial&&this._ndHammerTrial.active&&(this._ndHammerTrial.active=!1))},o.playRun=function(){var t=this;if(this._playType!=z.run){if(this._playType=z.run,!this.fighterModel.isRunning)if(this._isPlayRunningEffect=!0,this._runEffect){this._runEffect.active=!0;var e=this._runEffect.getComponentInChildren(_);e.loop=!0,e.clear(),e.stop(),e.play()}else f.loadEffectRes("runningSmoke").then((function(e){if(t.fighterModel.isRunning){t._runEffect=v.instance.getNode(e,t.node),t._runEffect.active=!0;var i=t._runEffect.getComponentInChildren(_);i.loop=!0,i.clear(),i.stop(),i.play()}}));this.ndSocketWeapon.active?(this.fighterModel.playAni(m.ANI_TYPE.RUN_1,!0,!1,(function(){}),1),this._hideHammerTrial()):this.fighterModel.playAni(m.ANI_TYPE.RUN,!0,!1,(function(){}),1)}},o.playAttack=function(t,e){var i=this;this._playType!=z.attack&&(this._playType=z.attack,t.hammerCount=0,t.attackPropType=g.NULL,u.instance.playSound(m.AUDIO_NAME.HIT),this._ndHammerTrial.active=!0,I.instance.playTrail(this._ndHammerTrial),this.fighterModel.isActick=e,this.fighterModel.playAni(m.ANI_TYPE.ATTACK,!1,!1,(function(){i._hideHammerTrial(),i.ndSocketWeapon.active=!1,i.playIdle()}),1))},o.playIdle=function(){if(this._playType!=z.idle){if(this._playType=z.idle,this.fighterModel.playAni(m.ANI_TYPE.IDLE,!0,!1,(function(){}),2),this._runEffect&&this._isPlayRunningEffect)this._runEffect.getComponentInChildren(_).loop=!1;this._isPlayRunningEffect=!1}},o.playMove=function(t,e,i,n){var s,o;if(this._playType==z.idle||this._playType==z.run){if(n.hammerCount>0)if(h.distance(this.vec3_lastPos,i.position)<5){h.subtract(this.vec3_pos_1,this.node.position,i.position);var a=180*Math.atan(this.vec3_pos_1.z/this.vec3_pos_1.x)/Math.PI;return this.vec3_pos_1.x<0?a=this.vec3_pos_1.z<0?180-a:-1*(a+180):a*=-1,a-=90,E.instance.sendFrame({A:m.ACTION.HIT,V:a}),this.vec3_angle.y=a,this.node.eulerAngles=this.vec3_angle,void this.playAttack(n,!0)}var l=A.instance.getEasyTouchInfo(m.EASY_TOUCH.TOUCH_LEFT_Y),c=A.instance.getEasyTouchInfo(m.EASY_TOUCH.TOUCH_LEFT_X);if(0==l&&0==c)return this._playType!=z.idle&&(this.vec3_angle.set(this.node.eulerAngles.clone()),this.vec3_lastPos.set(this.node.position.clone()),E.instance.sendFrame({A:m.ACTION.MOVE,V:this.vec3_angle.y,X:this.vec3_lastPos.x,Z:this.vec3_lastPos.z,MX:c,MY:l})),void this.playIdle();this.playRun();a=180*Math.atan(c/l)/Math.PI;l<0&&(a-=180),this.vec3_angle.y=180-a,this.node.eulerAngles=this.vec3_angle,this.vec3_lastPos.set(this.node.position.clone()),this.vec3_pos.set(this.node.position.clone());var r=1-(this.node.scale.x-1)*m.MIN_SPEED_PERCENT;this.vec3_pos.x+=.2*c*e*60*r,this.vec3_pos.z-=.2*l*e*60*r,this._mat.m12=this.vec3_pos.x,this._mat.m13=this.vec3_pos.y,this._mat.m14=this.vec3_lastPos.z,t.playerLogic.intersectWithObstacle(this._mat,this.node.rotation,this.node.scale,null==(s=this.node.parent)?void 0:s.scale)||(this.vec3_lastPos.x=this.vec3_pos.x),this._mat.m12=this.vec3_lastPos.x,this._mat.m13=this.vec3_pos.y,this._mat.m14=this.vec3_pos.z,t.playerLogic.intersectWithObstacle(this._mat,this.node.rotation,this.node.scale,null==(o=this.node.parent)?void 0:o.scale)||(this.vec3_lastPos.z=this.vec3_pos.z),0==this._moveIndex&&E.instance.sendFrame({A:m.ACTION.MOVE,V:this.vec3_angle.y,X:this.vec3_lastPos.x,Z:this.vec3_lastPos.z,MX:c,MY:l}),this.node.setPosition(this.vec3_lastPos),this._moveIndex++,this._moveIndex>4&&(this._moveIndex=0)}},o.playMoveAi=function(t,e,i,n){var s,o;if(this._playType==z.idle||this._playType==z.run){if(n.hammerCount>0)if(h.distance(this.vec3_lastPos,i.position)<5){h.subtract(this.vec3_pos_1,this.node.position,i.position);var a=180*Math.atan(this.vec3_pos_1.z/this.vec3_pos_1.x)/Math.PI;return this.vec3_pos_1.x<0?a=this.vec3_pos_1.z<0?180-a:-1*(a+180):a*=-1,a-=90,E.instance.sendFrame({A:m.ACTION.HIT,V:a,AI:1}),this.vec3_angle.y=a,this.node.eulerAngles=this.vec3_angle,void this.playAttack(n,!0)}this.playRun();var l=1-(this.node.scale.x-1)*m.MIN_SPEED_PERCENT;if(this._aiPosIndex+=this._posPer*l,this._aiPosIndex>=1){L.set(W);for(var c=[],r=0;r<m.AI_POS_INDEX[this._nextIndex].length;r++)m.AI_POS_INDEX[this._nextIndex][r]!=this._lastIndex&&c.push(m.AI_POS_INDEX[this._nextIndex][r]);this._lastIndex=this._nextIndex;r=Math.floor(Math.random()*c.length);this._nextIndex=c[r],W.set(this._aiPosNode.children[this._nextIndex-1].position),this._aiPosIndex-=1;var _=h.distance(L,W);this._posPer=m.AI_SPEED/_}h.lerp(this.vec3_pos,L,W,this._aiPosIndex);var d=W.x-L.x,p=L.z-W.z;if(0!=d||0!=p){a=180*Math.atan(d/p)/Math.PI;p<0&&(a-=180),this.vec3_angle.y=180-a,this.node.eulerAngles=this.vec3_angle}this.vec3_lastPos.set(this.node.position.clone()),this._mat.m12=this.vec3_pos.x,this._mat.m13=this.vec3_pos.y,this._mat.m14=this.vec3_lastPos.z,t.playerLogic.intersectWithObstacle(this._mat,this.node.rotation,this.node.scale,null==(s=this.node.parent)?void 0:s.scale)||(this.vec3_lastPos.x=this.vec3_pos.x),this._mat.m12=this.vec3_lastPos.x,this._mat.m13=this.vec3_pos.y,this._mat.m14=this.vec3_pos.z,t.playerLogic.intersectWithObstacle(this._mat,this.node.rotation,this.node.scale,null==(o=this.node.parent)?void 0:o.scale)||(this.vec3_lastPos.z=this.vec3_pos.z),0==this._moveIndex&&E.instance.sendFrame({A:m.ACTION.MOVE,V:this.vec3_angle.y,X:this.vec3_lastPos.x,Z:this.vec3_lastPos.z,AI:1}),this.node.setPosition(this.vec3_lastPos),this._moveIndex++,this._moveIndex>4&&(this._moveIndex=0)}},o.updateStateRecovery=function(t){this.node.eulerAngles=t.eulerAngles,this.node.setPosition(t.position),t.hammerCount&&!1===this.ndSocketWeapon.active?this.ndSocketWeapon.active=!0:0===t.hammerCount&&this.ndSocketWeapon.active&&!this.fighterModel.isAttacking&&(this.ndSocketWeapon.active=!1)},o.updateState=function(t,e,i){if(this._playType==z.idle||this._playType==z.run){if(this.playerState=e,i||e.channel.openId!=E.instance.ownPlayerId&&!E.instance.isAi){var n=!1;e.eulerAngles.equals(this.node.eulerAngles)||(e.channel.openId!=E.instance.ownPlayerId&&(this.node.eulerAngles=e.eulerAngles),n=!0),0!=e.moveX||0!=e.moveY?(h.lerp(this.vec3_pos_1,this.node.position,e.position,.2),this.node.setPosition(this.vec3_pos_1),this.playRun()):n?this.playRun():this._isPlayRunningEffect&&this.playIdle(),e.attackPropType===g.HAMMER&&(this.node.setPosition(e.position),this.playAttack(e,!1))}if(e.attackPropType===g.HAMMER_ED&&(e.attackPropType=g.NULL,this.onHammerHit(e)),e.score>this._score){var s=e.score-this._score;u.instance.playSound(m.AUDIO_NAME.GOLD),p.dispatchEvent(m.EVENT_NAME.ON_SHOW_COIN_TIPS,"+"+s,this.node.worldPosition.clone()),this._score=e.score}var o=m.PLAYER_ORIGIN_SCALE+this._score*m.ADD_SIZE_PER_COIN;if((o=o>=2?2:o)!==this.node.scale.x){var a=P.lerp(o,this.node.scale.x,10*t);this.node.setScale(a,a,a),this._ndHammer.setScale(a,a,a)}e.isScoreLead&&!this.ndSocketCrown.active?this.ndSocketCrown.active=!0:!e.isScoreLead&&this.ndSocketCrown.active&&(this.ndSocketCrown.active=!1),e.hammerCount&&!1===this.ndSocketWeapon.active?(this.ndSocketWeapon.active=!0,this._playType==z.run&&(this.fighterModel.playAni(m.ANI_TYPE.RUN_1,!0,!1,(function(){}),1),this._hideHammerTrial())):0===e.hammerCount&&this.ndSocketWeapon.active&&this.fighterModel.isAttacking}},o.onHammerHit=function(t){var e=this;this._playType!=z.is_attack&&(this._playType=z.is_attack,I.instance.playEffect(this.node,"dizzyEff",!0,!0,1),this.fighterModel.playAni(m.ANI_TYPE.HIT,!1,!0,(function(){e.fighterModel.playAni(m.ANI_TYPE.DIZZY,!1,!1,(function(){e.playIdle()}),11)}),9))},o._playHitEffect=function(t,e,i){void 0===e&&(e=1),t.y=.1,I.instance.playParticle("hitNew1",t,0,e,null,(function(){i&&i()}))},o.showFighterGameOverAni=function(t){var e=this;void 0===t&&(t=!1),this._playType=z.game_over,t?this.fighterModel.playAni(m.ANI_TYPE.VICTORY,!0,!1,(function(){}),13):this.fighterModel.playAni(m.ANI_TYPE.LOSE,!1,!1,(function(){e.fighterModel.playAni(m.ANI_TYPE.LOSE_1,!0,!1,(function(){}),15)}),14)},e}(d)).prototype,"ndSocketCrown",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(k.prototype,"model",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(k.prototype,"fighterModel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(k.prototype,"ndSocketWeapon",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=k))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/fighterModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./gobeUtil.ts"],(function(i){"use strict";var t,n,e,a,s,r,o,l,c,u,h,y;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,a=i.assertThisInitialized,s=i.createClass},function(i){r=i.cclegacy,o=i._decorator,l=i.SkeletalAnimationComponent,c=i.AnimationClip,u=i.Component},function(i){h=i.Constant},function(i){y=i.GobeUtil}],execute:function(){var p,g,A,_,f;r._RF.push({},"2a13cx4bHtFXqrrQXCxPbSy","fighterModel",void 0);var T=o.ccclass,P=o.property;i("FighterModel",(p=T("FighterModel"),g=P(l),p((f=t((_=function(i){function t(){for(var t,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return t=i.call.apply(i,[this].concat(s))||this,e(t,"ani",f,a(t)),t.isAniPlaying=!1,t._aniType="",t._aniState=null,t.isActick=!1,t}n(t,i);var r=t.prototype;return r.playAni=function(i,t,n,e,a){var s,r,o=this;if(void 0===t&&(t=!1),void 0===n&&(n=!1),this._aniType!=i){if(this._aniState=null==(s=this.ani)?void 0:s.getState(i),this._aniState&&this._aniState.isPlaying){if(!n)return;this._aniState.time=0,this._aniState.sample()}this._aniType=i,null==(r=this.ani)||r.play(i),this.isAniPlaying=!0,this._aniState&&(this._aniState.wrapMode=t?c.WrapMode.Loop:c.WrapMode.Normal),t||this.ani.once(l.EventType.FINISHED,(function(){o.isAniPlaying=!1,e&&e()}))}},r.attackPlayer=function(){this.isActick&&(this.isActick=!1,y.instance.sendFrame({A:h.ACTION.IS_ATTACK_ED}))},s(t,[{key:"isRunning",get:function(){return this._aniType===h.ANI_TYPE.RUN&&!0===this.isAniPlaying}},{key:"isIdle",get:function(){return this._aniType===h.ANI_TYPE.IDLE&&!0===this.isAniPlaying}},{key:"isAttacking",get:function(){return this._aniType===h.ANI_TYPE.ATTACK&&!0===this.isAniPlaying}},{key:"isHitting",get:function(){return this._aniType===h.ANI_TYPE.HIT&&!0===this.isAniPlaying}},{key:"isDizzying",get:function(){return this._aniType===h.ANI_TYPE.DIZZY&&!0===this.isAniPlaying}}]),t}(u)).prototype,"ani",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=_))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/fightUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gobeUtil.ts","./util.ts","./constant.ts","./clientEvent.ts","./resourceUtil.ts"],(function(e){"use strict";var t,r,n,a,i,o,l,c,u,s,y,p,h,f,d,g,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.LabelComponent,c=e.Node,u=e.SpriteComponent,s=e.SpriteFrame,y=e.Component},function(e){p=e.GobeUtil,h=e.ROOM_TYPE},function(e){f=e.Util},function(e){d=e.Constant},function(e){g=e.ClientEvent},function(e){b=e.ResourceUtil}],execute:function(){var m,v,P,w,I,_,S,U,E,N,T,C,F,M,z,D,R;i._RF.push({},"65e1ee23EZN740ZAZi01CFa","fightUI",void 0);var H=o.ccclass,A=o.property;e("FightUI",(m=H("FightUI"),v=A([l]),P=A([l]),w=A([c]),I=A([u]),_=A([s]),S=A(l),U=A([c]),m((T=t((N=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"aryPlayerDelay",T,a(t)),n(t,"aryPlayerScore",C,a(t)),n(t,"aryPlayerNode",F,a(t)),n(t,"aryPlayerHead",M,a(t)),n(t,"aryHead",z,a(t)),n(t,"lbCountDown",D,a(t)),n(t,"ringNode",R,a(t)),t._parent=null,t}r(t,e);var i=t.prototype;return i.show=function(e){this.lbCountDown.string=f.formatTimeForSecond(60,!0),this._parent=e;for(var t=this._parent.logicManager.currentGameState.players,r=0;r<t.length;r++){var n=t[r];if(n.channel){this.aryPlayerNode[r].active=!0;var a=0;p.instance.checkIsRoomOwner(n.channel.openId)||(a=1),n.channel.headUrl&&n.channel.headUrl.length?b.loadSpriteFrameURL(n.channel.headUrl,this.aryPlayerHead[a]):this.aryPlayerHead[a].spriteFrame=this.aryHead[a]}else this.aryPlayerNode[r].active=!1}var i=p.instance.checkIsRoomOwner(p.instance.ownPlayerId);this.ringNode[0].active=i,this.ringNode[1].active=!i,g.dispatchEvent(d.EVENT_NAME.GAME_INIT)},i._updatePlayerState=function(){if(!p.instance.room||p.instance.roomType==h.START){for(var e=this._parent.logicManager.currentGameState,t=e.players,r=0;r<t.length;r++){var n=t[r];if(n.channel){var a=0;p.instance.checkIsRoomOwner(n.channel.openId)||(a=1),this.aryPlayerScore[a].string=""+n.score}}var i=e.time>0?e.time:0;i>d.GAME_TIME&&(i=d.GAME_TIME),this.lbCountDown.string=f.formatTimeForSecond(i,!0)}},i.lateUpdate=function(e){this._updatePlayerState()},t}(y)).prototype,"aryPlayerDelay",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(N.prototype,"aryPlayerScore",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=t(N.prototype,"aryPlayerNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=t(N.prototype,"aryPlayerHead",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=t(N.prototype,"aryHead",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(N.prototype,"lbCountDown",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(N.prototype,"ringNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=N))||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/gameCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,o,a,r,s,c,u,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Vec3,c=t.Camera,u=t.CameraComponent,l=t.Component}],execute:function(){var p,m,d,h,f;a._RF.push({},"30104VtL2VPDKHTFanbljZB","gameCamera",void 0);var g=r.ccclass,_=r.property,C=new s;new s,t("GameCamera",(p=g("GameCamera"),m=_(c),p((f=e((h=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"camera",f,o(e)),e._targetNode=null,e._isUpdate=!1,e}i(e,t);var a=e.prototype;return a.start=function(){window.mainCamera=this.camera.getComponent(u)},a.init=function(t){this._targetNode=t,this.node.setPosition(this._targetNode.position),this.node.setRotationFromEuler(0,180,0),this.node.children[0].setRotationFromEuler(-60,-180,0),this.node.children[0].setPosition(0,34,-17)},a.startGame=function(){this._isUpdate=!0},a.finishGame=function(){this._isUpdate=!1},a.update=function(t){this._isUpdate&&(s.lerp(C,this.node.position,this._targetNode.position,.1),this.node.setPosition(C))},e}(l)).prototype,"camera",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/gameOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fighterModel.ts","./uiManager.ts","./audioManager.ts","./constant.ts","./resourceUtil.ts","./poolManager.ts","./gobeUtil.ts"],(function(n){"use strict";var e,i,t,a,o,r,l,s,c,u,A,p,h,E,N,_,g,d,f,M,y,b;return{setters:[function(n){e=n.applyDecoratedDescriptor,i=n.inheritsLoose,t=n.initializerDefineProperty,a=n.assertThisInitialized},function(n){o=n.cclegacy,r=n._decorator,l=n.Node,s=n.LabelComponent,c=n.SpriteComponent,u=n.SpriteFrame,A=n.Animation,p=n.AnimationClip,h=n.AnimationComponent,E=n.Component},function(n){N=n.FighterModel},function(n){_=n.UIManager},function(n){g=n.AudioManager},function(n){d=n.Constant},function(n){f=n.ResourceUtil},function(n){M=n.PoolManager},function(n){y=n.GobeUtil,b=n.WIFI_TYPE}],execute:function(){var m,L,w,I,P,R,v,O,T,S,C,D,U,H,W,G,F,z,Y,B,V;o._RF.push({},"7da34kgvy5GR72hclTKBICW","gameOver",void 0);var k=r.ccclass,K=r.property;n("GameOver",(m=k("gameOver"),L=K([l]),w=K([s]),I=K([s]),P=K([c]),R=K([u]),v=K(l),O=K(l),T=K(A),S=K(l),m((U=e((D=function(n){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=n.call.apply(n,[this].concat(o))||this,t(e,"aryNodeWin",U,a(e)),t(e,"aryLbScore",H,a(e)),t(e,"aryLbName",W,a(e)),t(e,"arySpIcon",G,a(e)),t(e,"aryHead",F,a(e)),t(e,"leftNode",z,a(e)),t(e,"rightNode",Y,a(e)),t(e,"winAni",B,a(e)),t(e,"btnAgc",V,a(e)),e._parent=null,e._girlNode=null,e._boyNode=null,e}i(e,n);var o=e.prototype;return o.onDisable=function(){this._cleanModel(),this.winAni.stop(),this.winAni.node.active=!1,_.instance.hideDialog(d.PANEL_NAME.FIGHT_UI)},o.show=function(n,e){var i=this;this.winAni.stop(),this.winAni.node.active=!1,this._parent=n;var t=n.logicManager.currentGameState.players;if(!(t.length<2)){for(var a in g.instance.stop(d.AUDIO_NAME.BACKGROUND),g.instance.playSound(d.AUDIO_NAME.WIN),t){var o=t[a];if(o.channel){var r=0;if(y.instance.checkIsRoomOwner(o.channel.openId)||(r=1),parseInt(a)===e){this.winAni.node.setPosition(this.aryNodeWin[r].position),this.winAni.node.active=!0;var l=this.winAni.getState("leaveWinAniIn");l&&(l.time=0,l.sample(),this.winAni.play("leaveWinAniIn"),l.wrapMode=p.WrapMode.Normal),this.winAni.once(h.EventType.FINISHED,(function(){var n=i.winAni.getState("leaveWinAniIdle");n&&(n.time=0,n.sample(),i.winAni.play("leaveWinAniIdle"),n.wrapMode=p.WrapMode.Loop)}))}this._showModel(r,-1==e||parseInt(a)===e),this.aryLbScore[r].string=o.score+"",this.aryLbName[r].string=o.channel.name,o.channel.headUrl&&o.channel.headUrl.length?f.loadSpriteFrameURL(o.channel.headUrl,this.arySpIcon[r]):this.arySpIcon[r].spriteFrame=this.aryHead[r]}}y.instance.leaveRoom(),this.btnAgc.active=y.instance.isOpenPgs&&y.instance.isHwLogin}},o.onAgainBtnClick=function(){var n=this;_.instance.showDialog(d.PANEL_NAME.MATCH_PANEL,[],(function(){}),!0),y.instance.wifiType==b.WIFI?y.instance.matchRoom((function(){_.instance.hideDialog(d.PANEL_NAME.MATCH_PANEL),_.instance.hideDialog(d.PANEL_NAME.GAME_OVER),_.instance.showDialog(d.PANEL_NAME.READY,[!0]),n._parent.reset()}),(function(){_.instance.showTips(d.ROOM_TIPS.MATCH_ROOM_ERROR),_.instance.hideDialog(d.PANEL_NAME.MATCH_PANEL)})):y.instance.createRoomAI((function(){_.instance.hideDialog(d.PANEL_NAME.MATCH_PANEL),_.instance.hideDialog(d.PANEL_NAME.GAME_OVER),_.instance.showDialog(d.PANEL_NAME.READY,[!0]),n._parent.reset()}),(function(){_.instance.showTips(d.ROOM_TIPS.MATCH_ROOM_ERROR),_.instance.hideDialog(d.PANEL_NAME.MATCH_PANEL)}))},o.onClickLeave=function(){y.instance.isChangeWifiType?(this._parent.reset(),_.instance.showTips(d.ROOM_TIPS.LEAVE_ROOM_SUCCESS),_.instance.hideDialog(d.PANEL_NAME.GAME_OVER),_.instance.showTransition(d.SCENE_NAME.SLECT)):_.instance.showDialog(d.PANEL_NAME.TIP_PANEL,[d.ROOM_TIPS.LEAVE_GAME,function(){y.instance.leaveGame(),_.instance.hideDialog(d.PANEL_NAME.GAME_OVER),_.instance.showTransition(d.SCENE_NAME.SLECT)}],(function(){}),!0)},o.onClickAgc=function(){y.instance.forumPagePublish(),y.instance.leaveRoom()},o._showModel=function(n,e){var i=this,t=d.READY_PREFAB.BOY_MODEL,a=this.leftNode;1===n&&(a=this.rightNode,t=d.READY_PREFAB.GIRL_MODEL),null===(1===n?this._girlNode:this._boyNode)&&f.getUIPrefabRes(t,(function(t,o){if(null===(1===n?i._girlNode:i._boyNode)){var r=M.instance.getNode(o,a),l=r.getComponent(N);e?l.playAni(d.ANI_TYPE.VICTORY,!0,!1,(function(){}),13):l.playAni(d.ANI_TYPE.LOSE,!1,!1,(function(){l.playAni(d.ANI_TYPE.LOSE_1,!0,!1,(function(){}),15)}),14),1===n?i._girlNode=r:i._boyNode=r}}))},o._cleanModel=function(){M.instance.putNode(this._girlNode),this._girlNode=null,M.instance.putNode(this._boyNode),this._boyNode=null},e}(E)).prototype,"aryNodeWin",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=e(D.prototype,"aryLbScore",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=e(D.prototype,"aryLbName",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=e(D.prototype,"arySpIcon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=e(D.prototype,"aryHead",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=e(D.prototype,"leftNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(D.prototype,"rightNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(D.prototype,"winAni",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(D.prototype,"btnAgc",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=D))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/gameState.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var c;t("PropType",void 0),e._RF.push({},"2ff80KwmIJKHo1u2J9Dycss","gameState",void 0),function(t){t[t.NULL=0]="NULL",t[t.COIN=1]="COIN",t[t.HAMMER=2]="HAMMER",t[t.RAINING_COIN=3]="RAINING_COIN",t[t.HAMMER_ED=4]="HAMMER_ED"}(c||(c=t("PropType",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/gobeUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./constant.ts","./playerData.ts","./uiManager.ts","./util.ts"],(function(e){"use strict";var o,t,n,a,i,s,r,c,l,m,_,h,d;return{setters:[function(e){o=e.asyncToGenerator,t=e.createClass,n=e.regeneratorRuntime},function(e){a=e.cclegacy,i=e.resources,s=e.Asset,r=e.sys,c=e.native},function(e){l=e.ClientEvent},function(e){m=e.Constant},function(e){_=e.PlayerData},function(e){h=e.UIManager},function(e){d=e.Util}],execute:function(){var f,u,I;e({PLAYER_TYPE:void 0,ROOM_TYPE:void 0,WIFI_TYPE:void 0}),a._RF.push({},"edfacN2PbZLIJvJ9KH72fR3","gobeUtil",void 0),function(e){e[e.READY=0]="READY",e[e.START=1]="START",e[e.END=2]="END"}(f||(f=e("PLAYER_TYPE",{}))),function(e){e.READY="ready",e.START="start",e.END="end"}(u||(u=e("ROOM_TYPE",{}))),function(e){e.STAND_ALONE="stand-alone",e.WIFI="wifi"}(I||(I=e("WIFI_TYPE",{})));e("MessageInfo",(function(){this.playerId="",this.msg=""}));var g=e("RoomAloneInfo",(function(){this.players=[],this.customRoomProperties="",this.ownerId="",this.roomCode=""})),p=e("GobeUtil",function(){function e(){this._openId="",this._client=null,this._room=null,this._roomAloneInfo=new g,this._ownPlayerId="",this._roomInfos=[],this._cacertNativeUrl="",this._lastRoomId=null,this._isInitMedia=!1,this._isChannelId=!1,this._isOpenPgs=!1,this._msgLst=[],this._isStartFS=!1,this._isStartGame=!1,this._isOtherStartGame=!1,this._time=0,this._isAi=!1,this._hammerIndex=0,this._isRoomOwnIn=!1,this.roomType=u.READY,this._isDisJoin=!1,this._recvMap=new Map,this._currFrame=0,this._wifiType=I.WIFI,this._isHwInit=!1,this._isHwLogin=!1,this._otherDisInterval=0,this.isChangeWifiType=!0,this._isReadyDis=!1,this.serverTimeDis=0,this._isOpenMedia=!1,this._isRemoveMedia=!1,this._isRemoveChannel=!1}var a=e.prototype;return a.initSDK=function(e,o){this._openId=e,this._getToken(o)},a._updateAvailableRooms=function(e){var o=this;this._client.getAvailableRooms({offset:"0",limit:10,sync:!0}).then((function(t){o._roomInfos=t.rooms,e&&e(),console.log("aaaaaaaa3 查询房间列表成功",o._roomInfos)})).catch((function(e){o._roomInfos=[],console.log("aaaaaaaa3 查询房间列表失败",e)}))},a.updateAvailableRooms=function(){this._updateAvailableRooms((function(){}))},a.checkIsRoomOwner=function(e){return!!this.room&&this.room.ownerId===e},a.isOwnPlayer=function(o){return e.instance.ownPlayerId==o},a.sendFrame=function(e){if(this.wifiType==I.STAND_ALONE)this._recvMap.set(++this._currFrame,[{playerId:this._ownPlayerId,data:[JSON.stringify(e)],timestamp:0}]);else{if(!this._room)return;this._room.sendFrame(JSON.stringify(e))}},a._getToken=function(o){var t=this,n=new XMLHttpRequest;n.open("POST","https://connect-drcn.hispace.hicloud.com/agc/apigw/oauth2/v1/token",!0),n.setRequestHeader("Content-Type","application/json;charset=utf-8"),n.onload=function(){if(200===n.status){console.log("aaaaaaaa3 xhr",n.response);var e=JSON.parse(n.response);t._initMgobe(e.access_token,o)}};var a;a={client_id:e.CLIENT_ID,client_secret:e.CLIENT_SECRET,grant_type:"client_credentials",useJwt:0},n.send(JSON.stringify(a))},a._loadCert=function(e,o){var t=this;i.load("/endpoint-cert",s,(function(n,a){console.log("aaaaaaaa1 加载证书结束 "+!n),n||(t._cacertNativeUrl=a.nativeUrl,t._initMgobe(e,o))}))},a._initMgobe=function(o,t){var n=this;if(r.Platform.ANDROID==r.platform||r.Platform.OPENHARMONY==r.platform){if(""==this._cacertNativeUrl)return console.log("aaaaaaaa2"),void this._loadCert(o,t);console.log("aaaaaaaa1 _initMgobe1",o),this._client=new GOBE.Client({appId:e.APP_ID,openId:this._openId,clientId:e.CLIENT_ID,clientSecret:e.CLIENT_SECRET,accessToken:o,platform:GOBE.PlatformType.OTHER,cerPath:this._cacertNativeUrl})}else console.log("aaaaaaaa1 _initMgobe2",o),this._client=new GOBE.Client({appId:e.APP_ID,openId:this._openId,clientId:e.CLIENT_ID,clientSecret:e.CLIENT_SECRET,accessToken:o});console.log("aaaaaaaa4"),this._client.onInitResult((function(o){0==o&&(t&&t(!0),n._lastRoomId&&e.instance.joinRoom(n._lastRoomId,(function(){if(n._room.customRoomProperties==u.READY)n.leaveRoom(),n._lastRoomId=null;else{var o=JSON.parse(n._room.customRoomProperties);if(o.type==u.END)n.leaveRoom(),n._lastRoomId=null;else{var t=o.time;Math.floor(m.GAME_TIME-((new Date).getTime()-t+e.instance.serverTimeDis)/1e3)>5?(setTimeout((function(){h.instance.showDialog(m.PANEL_NAME.READY,null,(function(){}),!0),h.instance.showTips(m.ROOM_TIPS.JOIN_ROOM_SUCCESS),h.instance.hideDialog(m.PANEL_NAME.JOIN_ROOM_PANEL)}),500),n._isDisJoin=!0):(n.leaveRoom(),n._lastRoomId=null)}}console.log("aaaaaaaa2----_lastRoomId reconnect success")}),(function(e){console.log("aaaaaaaa2----_lastRoomId reconnect fail",e)})))})),this._client.init().then((function(e){n._ownPlayerId=e.playerId,n._lastRoomId=n._client.lastRoomId,n.serverTimeDis=e.loginTimestamp-(new Date).getTime(),console.log("aaaaaaaa2 init playerid",e.playerId)})).catch((function(e){console.log("aaaaaaaa2 调用Client.init方法进行初始化error：",e),t&&t(!1)}))},a.startGame=function(){this._isDisJoin?(this._isDisJoin=!1,l.dispatchEvent(m.EVENT_NAME.ON_GAME_START)):(this._hammerIndex=0,this.wifiType==I.STAND_ALONE?(this._roomAloneInfo.customRoomProperties=JSON.stringify({type:u.START,time:(new Date).getTime()}),this.roomType=u.START,this._time=(new Date).getTime(),l.dispatchEvent(m.EVENT_NAME.ON_GAME_START)):this._room&&this._room.sendToServer(JSON.stringify({msg:m.START_GAME,playerId:this._ownPlayerId})))},a.createHammer=function(e){this._hammerIndex>=m.HAMMER_POS.length||this.room&&this.sendFrame({A:m.ACTION.CREATE_HAMMER,V:this._hammerIndex,X:m.HAMMER_POS[this._hammerIndex][0],Y:m.HAMMER_POS[this._hammerIndex][1],Z:m.HAMMER_POS[this._hammerIndex][2],T:e})},a.createCoin=function(e){this.room&&this.sendFrame({A:m.ACTION.CREATE_ICON,I:JSON.stringify({coin_pos:e})})},a.finishGame=function(){console.log("aaaaaaaa2 finishGame 1"),this._wifiType==I.STAND_ALONE?(console.log("aaaaaaaa2 finishGame 2"),this._isStartFS=!1,this._roomAloneInfo.customRoomProperties=JSON.stringify({type:u.END,time:this._time}),this._isStartFS=!1,l.dispatchEvent(m.EVENT_NAME.ON_GAME_END)):(console.log("aaaaaaaa2 finishGame 3",this._room&&this._room.ownerId==this._ownPlayerId,this._room.ownerId,this._isRoomOwnIn),(this._room&&this._room.ownerId==this._ownPlayerId||!this._isRoomOwnIn&&this._room.ownerId!=this._ownPlayerId)&&(console.log("aaaaaaaa2 finishGame 4"),this._isStartFS&&(this._isStartFS=!1,console.log("aaaaaaaa2 stopFrameSync"),this._room.stopFrameSync()),console.log("aaaaaaaa2-------finishGame------"),this._room.updateRoomProperties({customRoomProperties:JSON.stringify({type:u.END,time:this._time})}),this._isRoomOwnIn||l.dispatchEvent(m.EVENT_NAME.ON_GAME_END)))},a._enabledEventRoom=function(){var o=this;this._isStartGame=!1,this._isOtherStartGame=!1,this._room.onJoin((function(e){if(console.log("aaaaaaaa2----onJoin 加入",o._room.ownerId,e.playerId),o._room.ownerId!=e.playerId?l.dispatchEvent(m.EVENT_NAME.ON_OTHER_JOIN_ROOM,e.playerId):o._isRoomOwnIn=!0,e.playerId!=o.ownPlayerId&&o._otherDisInterval>0&&(clearInterval(o._otherDisInterval),o._otherDisInterval=0),o._room&&e.playerId==o._ownPlayerId&&o._room.customRoomProperties)if(o._room.customRoomProperties==u.READY)o.roomType=u.READY,o._time=0;else if(o._room.customRoomProperties==u.END)o.roomType=u.END,o._time=(new Date).getTime()-1e3*m.GAME_TIME;else{var t=JSON.parse(o._room.customRoomProperties);o.roomType=t.type,o._time=t.time}})),this._room.onJoinFailed((function(e){console.log("aaaaaaaa2----onJoinFailed 加入失败",e)})),this._room.onLeave((function(e){console.log("aaaaaaaa2----onLeave 离开",e.playerId),e.playerId!=o._ownPlayerId?o.updateRoom():o._room.removeAllListeners(),o._room.ownerId==e.playerId&&(o._isRoomOwnIn=!1)})),this._room.onDisconnect((function(e){if(console.log("aaaaaaaa2 onDisconnect",e.playerId),e.playerId===o._room.playerId){if(o._room)var t=setInterval((function(){console.log("aaaaaaaa2 onDisconnect",t),null!=o._room?o._room.reconnect().then((function(){clearInterval(t),console.log("aaaaaaaa2----reconnect success")})).catch((function(){console.log("aaaaaaaa2----reconnect fail")})):clearInterval(t)}),1e3)}else if(o.updateRoom(),o.roomType==u.READY){o._isReadyDis=!0;var n=10;o._otherDisInterval=setInterval((function(){h.instance.showTips(m.ROOM_TIPS.PLAYER_LEAVE_1+n+m.ROOM_TIPS.PLAYER_LEAVE_2),--n<=0&&(l.dispatchEvent(m.EVENT_NAME.ON_GAME_END),o._room.updateRoomProperties({customRoomProperties:JSON.stringify({type:u.END,time:0})}),clearInterval(o._otherDisInterval))}),1e3)}o._room.ownerId==e.playerId&&(o._isRoomOwnIn=!1)})),this._room.onRoomPropertiesChange((function(e){console.log("aaaaaaaa2 onRoomPropertiesChange",e.customRoomProperties);var t=JSON.parse(e.customRoomProperties);o.roomType=t.type,o._time=t.time,t.type==u.START?l.dispatchEvent(m.EVENT_NAME.ON_GAME_START):t.type==u.END?l.dispatchEvent(m.EVENT_NAME.ON_GAME_END):(t.type,u.READY),o.updateRoom()})),this._room.onStartFrameSync((function(){console.log("aaaaaaaa2 onStartFrameSync"),o._isStartFS=!0,o._isAi||(o.joinTeamRoom(o._room.ownerId),o.joinGroupChannel(o._room.ownerId))})),this._room.onStopFrameSync((function(){console.log("aaaaaaaa2----onStopFrameSync结束帧同步"),o._isStartFS=!1,o._currFrame=0,o._recvMap=new Map,e.instance.mediaLeaveRoom(),e.instance.leaveChannel(),h.instance.hideDialog(m.PANEL_NAME.MEDIA_PANEL)})),this._room.onRecvFromServer((function(e){console.log("aaaaaaaa2----onRecvFromServer 服务端数据",e.msg);var t=e.msg,n=JSON.parse(t);n&&(n.msg==m.START_GAME?(n.playerId!=o._ownPlayerId?o._isOtherStartGame=!0:o._isStartGame=!0,o._room.ownerId==o._ownPlayerId&&o._isOtherStartGame&&o._isStartGame&&o._room.sendToServer(m.START_GAME_TIME)):n.msg==m.START_GAME_TIME&&(o.serverTimeDis=n.time-(new Date).getTime(),o._room.ownerId==o._ownPlayerId&&(o._room.startFrameSync(),o._room.updateRoomProperties({customRoomProperties:JSON.stringify({type:u.START,time:n.time,serverTimeDis:o.serverTimeDis})}))))})),this._room.onRecvFrame((function(e){if(e instanceof Array){for(var t=0;t<e.length;t++)o._time=e[t].time,e[t].frameInfo&&o._recvMap.set(e[t].currentRoomFrameId,e[t].frameInfo);o._currFrame=e[e.length-1].currentRoomFrameId,l.dispatchEvent(m.EVENT_NAME.ON_RECV_SYNC)}else o._time=e.time,e.frameInfo&&o._recvMap.set(e.currentRoomFrameId,e.frameInfo),o._currFrame=e.currentRoomFrameId}))},a.createRoomAI=function(e,o){var t=this;this.serverTimeDis=0,this._isAi=!0,this._wifiType=I.STAND_ALONE,this._currFrame=0,this._recvMap=new Map,console.log("aaaaaaaa2----createRoomAI 创建房间"),this._roomAloneInfo=new g,this._roomAloneInfo.ownerId=this._ownPlayerId,this._roomAloneInfo.roomCode="0001"+Math.floor(100*Math.random()),this._roomAloneInfo.players=[],this._roomAloneInfo.players.push({playerId:this._ownPlayerId,customPlayerProperties:_.instance.playerInfo.playerName}),d.randomName(1).then((function(e){t._roomAloneInfo.players.push({playerId:"ai00000",customPlayerProperties:e})})),this._roomAloneInfo.customRoomProperties=JSON.stringify({type:u.READY,time:0}),this.roomType=u.READY,this._time=0,this._isStartFS=!0,e&&e()},a.createRoom=function(e,o){var t=this;this._currFrame=0,this._recvMap=new Map,this._isAi=!1,this._wifiType=I.WIFI,console.log("aaaaaaaa2----createRoom 创建房间"),this._client.createRoom({maxPlayers:2},{customPlayerStatus:0,customPlayerProperties:_.instance.playerInfo.playerName}).then((function(o){t._room=o,t._lastRoomId=o.roomId,t._enabledEventRoom(),console.log("aaaaaaaa2 -------READY------"),t._room.updateRoomProperties({customRoomProperties:JSON.stringify({type:u.READY,time:0})}),e&&e(),console.log("aaaaaaaa2----创建房间成功")})).catch((function(e){o&&o(),console.log("aaaaaaaa2----创建房间失败 错误",e)}))},a.joinRoom=function(e,o,t){var n=this;this._currFrame=0,this._recvMap=new Map,this._isAi=!1,this._wifiType=I.WIFI,console.log("aaaaaaaa2----joinRoom 加入房间"),this._client.joinRoom(e,{customPlayerStatus:0,customPlayerProperties:_.instance.playerInfo.playerName}).then((function(e){n._room=e,n._lastRoomId=e.roomId,n._enabledEventRoom(),n._room.players.length==m.MAX_PLAYER&&(n._isRoomOwnIn=!0),console.log("aaaaaaaa2 加入房间成功"),o&&o()})).catch((function(e){console.log("aaaaaaaa2 申请加入房间 错误",e),t&&t(e)}))},a.matchRoom=function(e,o){var t=this;this._currFrame=0,this._recvMap=new Map,this._isAi=!1,this._wifiType=I.WIFI,console.log("aaaaaaaa2----matchRoom 开始匹配房间"),this._client.matchRoom({matchParams:{},maxPlayers:2,customRoomProperties:JSON.stringify({type:u.READY,time:0})},{customPlayerStatus:0,customPlayerProperties:_.instance.playerInfo.playerName}).then((function(o){console.log("aaaaaaaa2----matchRoom success"),t._room=o,t._lastRoomId=o.roomId,t._enabledEventRoom(),t._room.players.length==m.MAX_PLAYER&&(t._isRoomOwnIn=!0),e&&e()})).catch((function(e){o&&o(),console.log("aaaaaaaa2----matchRoom error",e)}))},a.updateRoom=function(){var e=this;null!=this._room&&this._room.update().then((function(o){e._room=o,console.log("aaaaaaaa2 updateRoom",o)})).catch((function(e){console.log("aaaaaaaa2 更新房间信息 error",e)}))},a.leaveRoom=function(e,o,t){var n=this;void 0===t&&(t=!0),this._isReadyDis&&(this._isReadyDis=!1,this._room&&this._room.sendToServer(m.DISMISS)),this._lastRoomId&&this._client?(this._client.leaveRoom().then((function(o){console.log("aaaaaaaa2离开房间 成功"),n._client=o,n._client.removeAllListeners(),n._room&&n._room.removeAllListeners(),n._room=null,e&&e()})).catch((function(e){o&&o(e),console.log("aaaaaaaa2离开房间 error",e)})),t&&(this.leaveChannel(),this.mediaLeaveRoom(),h.instance.hideDialog(m.PANEL_NAME.MEDIA_PANEL))):(this._roomAloneInfo=null,e&&e())},a.isInited=function(){return!!this._ownPlayerId},a.leaveGame=function(){this.isHwLogin=!1,this._ownPlayerId="",this._roomAloneInfo=null,this._client&&(this._client.destroy(),this._client=null,this._room=null,this._ownPlayerId="",this.leaveChannel(),this.mediaLeaveRoom(),this.destoryMedia(),h.instance.hideDialog(m.PANEL_NAME.MEDIA_PANEL),_.instance.isInit=!1)},a.startMedia=function(e){r.platform==r.Platform.ANDROID&&(console.log("time startMedia:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/MediaEngine","startMediaEngine","(Ljava/lang/String;)V",e))},a.destoryMedia=function(){r.platform==r.Platform.ANDROID&&(console.log("time destoryMedia:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/MediaEngine","destoryMediaEngine","()V"))},a.joinTeamRoom=function(e){this.isInitMedia&&r.platform==r.Platform.ANDROID&&(console.log("time joinTeamRoom:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/MediaEngine","joinTeamRoom","(Ljava/lang/String;)V",e))},a.mediaLeaveRoom=function(){if(this._msgLst=[],r.platform==r.Platform.ANDROID){var o=_.instance.getSetting("TeamRoom");if(o){var t=o[e.instance.openId];t&&""!=t&&(console.log("time mediaLeaveRoom:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/MediaEngine","leaveRoom","(Ljava/lang/String;)V",t))}this._isOpenMedia=!1}},a.mediaMuteAllPlayers=function(o){if(r.platform==r.Platform.ANDROID){var t=_.instance.getSetting("TeamRoom");if(t){var n=t[e.instance.openId];n&&""!=n&&(console.log("time mediaMuteAllPlayers:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/MediaEngine","muteAllPlayers","(Ljava/lang/String;I)V",n,o?0:1))}}},a.mediaEnableMic=function(e){r.platform==r.Platform.ANDROID&&(console.log("time mediaEnableMic:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/MediaEngine","enableMic","(I)V",e?0:1))},a.joinGroupChannel=function(e){r.platform==r.Platform.ANDROID&&(console.log("time joinGroupChannel:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/MediaEngine","joinGroupChannel","(Ljava/lang/String;)V",e))},a.leaveChannel=function(){if(r.platform==r.Platform.ANDROID){var o=_.instance.getSetting("JoinChannel");if(o){var t=o[e.instance.openId];t&&""!=t&&(console.log("time leaveChannel:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/MediaEngine","leaveChannel","(Ljava/lang/String;)V",t))}}},a.sendTextMsg=function(o){if(r.platform==r.Platform.ANDROID){var t=_.instance.getSetting("JoinChannel")[e.instance.openId];t&&""!=t&&(console.log("time sendTextMsg:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/MediaEngine","sendTextMsg","(Ljava/lang/String;Ljava/lang/String;)V",t,o))}},a.startRecordAudioToText=function(){r.platform==r.Platform.ANDROID&&(console.log("time startRecordAudioToText:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/MediaEngine","startRecordAudioToText","()V"))},a.stopRecordAudioToText=function(){r.platform==r.Platform.ANDROID&&(console.log("time stopRecordAudioToText:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/MediaEngine","stopRecordAudioToText","()V"))},a.startForumPage=function(){r.platform==r.Platform.ANDROID&&(this._isOpenPgs=!1,console.log("time startForumPage:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/ForumPage","startPgs","()V"))},a.openForumPage=function(){r.platform==r.Platform.ANDROID&&(console.log("time openForumPage:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/ForumPage","openForumPage","()V"))},a.forumPageCheckScene=function(){r.platform==r.Platform.ANDROID&&(console.log("time openForumPage:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/ForumPage","checkScene","()V"))},a.forumPagePublish=function(){r.platform==r.Platform.ANDROID&&(console.log("time openForumPage:"+(new Date).getTime()),c.reflection.callStaticMethod("com/cocos/game/ForumPage","publish","()V"))},a.checkInitMedia=function(){var o=_.instance.getSetting("TeamRoom");if(o&&o[e.instance.openId]){var t=o[e.instance.openId];if(""!=t&&t!=m.WORLD_ID)return e.instance.isRemoveMedia=!0,void e.instance.joinTeamRoom(t)}l.dispatchEvent(m.EVENT_NAME.INIT_MEDIA)},a.checkInitChannel=function(){var o=_.instance.getSetting("JoinChannel");if(o&&o[e.instance.openId]){var t=o[e.instance.openId];if(""!=t&&t!=m.WORLD_ID)return e.instance.joinGroupChannel(t),void(e.instance.isRemoveChannel=!0)}l.dispatchEvent(m.EVENT_NAME.INIT_CHANNEL)},a.inputRank=function(){var e=JSON.stringify({id:_.instance.playerInfo.playerId,score:_.instance.playerInfo.score,name:_.instance.playerInfo.playerName,icon:"https://huawei-hunter.obs.cn-north-4.myhuaweicloud.com/icon"+_.instance.playerInfo.icon+".png",staticId:_.instance.playerInfo.staticId});fetch("https://service-nhdz5z7l-1251720271.sh.apigw.tencentcs.com/release/postRank?info="+e,{method:"POST"}).then((function(e){return e.text()})).then(o(n().mark((function e(o){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(o);case 1:case"end":return e.stop()}}),e)}))))},a.hwSignIn=function(){r.platform==r.Platform.ANDROID&&c.reflection.callStaticMethod("com/cocos/game/JosAppControl","signIn","()V")},a.initHuawei=function(){r.platform==r.Platform.ANDROID&&c.reflection.callStaticMethod("com/cocos/game/JosAppControl","initHuawei","()V")},t(e,[{key:"openId",get:function(){return this._openId}},{key:"room",get:function(){return this._wifiType==I.STAND_ALONE?this._roomAloneInfo:this._room}},{key:"ownPlayerId",get:function(){return this._ownPlayerId}},{key:"roomPlayers",get:function(){return this._wifiType==I.STAND_ALONE?this._roomAloneInfo.players:this._room?this._room.players:[]}},{key:"lastRoomId",get:function(){return this._lastRoomId},set:function(e){this._lastRoomId=e}},{key:"isInitMedia",get:function(){return this._isInitMedia},set:function(e){this._isInitMedia=e}},{key:"isChannelId",get:function(){return this._isChannelId},set:function(e){this._isChannelId=e}},{key:"isOpenPgs",get:function(){return this._isOpenPgs},set:function(e){this._isOpenPgs=e}},{key:"msgLst",get:function(){return this._msgLst}},{key:"time",get:function(){return this.wifiType==I.STAND_ALONE?(new Date).getTime():this._time}},{key:"isAi",get:function(){return this._isAi}},{key:"hammerIndex",set:function(e){this._hammerIndex=e}},{key:"isRoomOwnIn",get:function(){return this._isRoomOwnIn}},{key:"isDisJoin",get:function(){return this._isDisJoin}},{key:"recvMap",get:function(){return this._recvMap}},{key:"currFrame",get:function(){return this._currFrame}},{key:"wifiType",get:function(){return this._wifiType}},{key:"isHwInit",get:function(){return this._isHwInit},set:function(e){this._isHwInit=e}},{key:"isHwLogin",get:function(){return this._isHwLogin},set:function(e){this._isHwLogin=e}},{key:"isOpenMedia",get:function(){return this._isOpenMedia},set:function(e){this._isOpenMedia=e}},{key:"isRemoveMedia",get:function(){return this._isRemoveMedia},set:function(e){this._isRemoveMedia=e}},{key:"isRemoveChannel",get:function(){return this._isRemoveChannel},set:function(e){this._isRemoveChannel=e}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}());p.CLIENT_ID="1228316143505133376",p.CLIENT_SECRET="B5827014FF1B4CEE5AF8685B62B6405C91A036DFA977D01F9D61AE7A3F857F5D",p.APP_ID="172249065902667589",p._instance=null,window.callbackToGMMCreate=function(e,o){console.log("time callbackToGMMCreate:"+(new Date).getTime()),0==e&&(p.instance.isInitMedia=!0,p.instance.checkInitMedia(),p.instance.checkInitChannel()),console.log("-------callbackToGMMCreate",e,o)},window.callbackToGmmJoin=function(e,o,t){if(console.log("time callbackToGmmJoin:"+(new Date).getTime()),0==e){var n=_.instance.getSetting("TeamRoom");if(n||(n={}),n[p.instance.openId]=o,_.instance.setSetting("TeamRoom",n),p.instance.isOpenMedia=!0,p.instance.mediaEnableMic(!1),p.instance.mediaMuteAllPlayers(!1),p.instance.isRemoveMedia)return void p.instance.mediaLeaveRoom()}else h.instance.showTips("实时语音开启异常："+e);console.log("------callbackToGmmJoin",e,t),l.dispatchEvent(m.EVENT_NAME.OPEN_MEDIA)},window.callbackToGmmMic=function(e,o,t){console.log("callbackToGmmMic",e,o,t)},window.callbackToGmmLeave=function(e,o,t){if(0==e){var n=_.instance.getSetting("TeamRoom");if(n[p.instance.openId]="",_.instance.setSetting("TeamRoom",n),p.instance.isRemoveMedia)return p.instance.isRemoveMedia=!1,void l.dispatchEvent(m.EVENT_NAME.INIT_MEDIA)}},window.callbackToJoinChannel=function(e,o,t){if(0==e){var n=_.instance.getSetting("JoinChannel");if(n||(n={}),n[p.instance.openId]=o,_.instance.setSetting("JoinChannel",n),p.instance.isChannelId=!0,p.instance.isRemoveChannel)return void p.instance.leaveChannel()}else h.instance.showTips("文本语音开启异常："+e);console.log("---------callbackToJoinChannel",e,t),l.dispatchEvent(m.EVENT_NAME.OPEN_CHANNEL)},window.callbackToLeaveChannel=function(e,o,t){if(console.log("time callbackToLeaveChannel:"+(new Date).getTime()),0==e){var n=_.instance.getSetting("JoinChannel");n[p.instance.openId]="",_.instance.setSetting("JoinChannel",n),p.instance.isChannelId=!1,p.instance.isRemoveChannel&&(p.instance.isRemoveChannel=!1,l.dispatchEvent(m.EVENT_NAME.INIT_CHANNEL))}console.log("---------callbackToLeaveChannel",e,t)},window.callbackToSendMsg=function(e,o){console.log("time callbackToSendMsg:"+(new Date).getTime()),p.instance.msgLst.push({isOwn:!0,content:e,sendId:o.substring(5)}),l.dispatchEvent(m.EVENT_NAME.SEND_MSG)},window.callbackToRecvMsg=function(e,o){console.log("time callbackToRecvMsg:"+(new Date).getTime()),p.instance.msgLst.push({isOwn:!1,content:e,sendId:o.substring(5)}),l.dispatchEvent(m.EVENT_NAME.SEND_MSG),console.log("callbackToRecvMsg",e)},window.callbackToVT=function(e,o){console.log("time callbackToVT:"+(new Date).getTime()),0==e?l.dispatchEvent(m.EVENT_NAME.SEND_VT,o):l.dispatchEvent(m.EVENT_NAME.SEND_VT,""),console.log("callbackToVT",o)},window.callbackToNoPer=function(){console.log("time callbackToNoPer:"+(new Date).getTime()),h.instance.showTips(m.ROOM_TIPS.MEDIA_FAIL)},window.callbackObsSuccess=function(){},window.callbackToStartPgs=function(){p.instance.isOpenPgs=!0,l.dispatchEvent(m.EVENT_NAME.OPEN_PGS)},window.callbackToJosInit=function(e,o){e==m.HUAWEI_LOGIN.INIT_SUCCESS&&(p.instance.isHwInit=!0),l.dispatchEvent(m.EVENT_NAME.HUAWEI_LOGIN_MSG,e,o)},a._RF.pop()}}}));

System.register("chunks:///_virtual/join_room_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gobeUtil.ts","./uiManager.ts","./constant.ts"],(function(n){"use strict";var i,o,t,e,a,c,s,r,l,u,_;return{setters:[function(n){i=n.applyDecoratedDescriptor,o=n.inheritsLoose,t=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){a=n.cclegacy,c=n._decorator,s=n.EditBox,r=n.Component},function(n){l=n.GobeUtil},function(n){u=n.UIManager},function(n){_=n.Constant}],execute:function(){var p,O,h,f,N;a._RF.push({},"4c16cW6IuBEZJNxoo2k68+N","join_room_panel",void 0);var R=c.ccclass,g=c.property;n("JoinRoomPanel",(p=R("JoinRoomPanel"),O=g(s),p((N=i((f=function(n){function i(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,t(i,"editBox",N,e(i)),i._callback=null,i}o(i,n);var a=i.prototype;return a.show=function(n){this.editBox.string="",this._callback=n},a.onJoinRoom=function(){var n=this;""!=this.editBox.string?l.instance.joinRoom(this.editBox.string,(function(){u.instance.showDialog(_.PANEL_NAME.READY),u.instance.showTips(_.ROOM_TIPS.JOIN_ROOM_SUCCESS),u.instance.hideDialog(_.PANEL_NAME.JOIN_ROOM_PANEL),n._callback&&n._callback()}),(function(n){u.instance.showTips(_.ROOM_TIPS.NO_ROOM_ID)})):u.instance.showTips(_.ROOM_TIPS.NO_ROOM_ID)},a.onClose=function(){u.instance.hideDialog(_.PANEL_NAME.JOIN_ROOM_PANEL)},i}(r)).prototype,"editBox",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/localConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./csvManager.ts","./resourceUtil.ts"],(function(n){"use strict";var t,e,a,r,i,c;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,a=n._decorator,r=n.resources},function(n){i=n.CSVManager},function(n){c=n.ResourceUtil}],execute:function(){var o,s;e._RF.push({},"12facSZhFRGIYa7yxiLVDOp","localConfig",void 0);var u=a.ccclass;a.property,n("LocalConfig",u("LocalConfig")(((s=function(){function n(){this._csvManager=new i,this._callback=new Function,this._currentLoad=0,this._cntLoad=0}var e=n.prototype;return e.loadConfig=function(n){this._callback=n,this._loadCSV()},e._loadCSV=function(){var n=this;r.loadDir("datas",(function(t,e){if(!t){var a=e.filter((function(n){return".md"!==n._native}));n._cntLoad=a.length,a.length?a.forEach((function(t,e,a){c.getTextData(t.name,(function(e,a){n._csvManager.addTable(t.name,a),n._tryToCallbackOnFinished()}))})):n._tryToCallbackOnFinished()}}))},e.queryOne=function(n,t,e){return this._csvManager.queryOne(n,t,e)},e.queryByID=function(n,t){return this._csvManager.queryByID(n,t)},e.getTable=function(n){return this._csvManager.getTable(n)},e.getTableArr=function(n){return this._csvManager.getTableArr(n)},e.queryAll=function(n,t,e){return this._csvManager.queryAll(n,t,e)},e.queryIn=function(n,t,e){return this._csvManager.queryIn(n,t,e)},e.queryByCondition=function(n,t){return this._csvManager.queryByCondition(n,t)},e._tryToCallbackOnFinished=function(){this._callback&&(this._currentLoad++,this._currentLoad>=this._cntLoad&&this._callback())},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,o=s))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/lodash.ts",["cc"],(function(r){"use strict";var n,t;return{setters:[function(r){n=r.cclegacy,t=r._decorator}],execute:function(){var e,u;n._RF.push({},"a40a4pGR6lCqo0coR1W4kAl","lodash",void 0);var i=t.ccclass;r("Lodash",i("Lodash")(((u=function(){function r(){}return r.find=function(n,t){var e;if(Array.isArray(n)||(n=r._toArray(n)),(e=n.filter(t)).length)return e[0]},r.forEach=function(n,t){Array.isArray(n)?n.forEach(t):r._toArrayKey(n).forEach((function(r,e,u){var i=r.key,o=r.value;t(o,i,n)}))},r.cloneDeep=function(n){if(null===n||"object"!=typeof n)return n;var t={};for(var e in n.constructor===Array&&(t=[]),n)n.hasOwnProperty(e)&&(t[e]=r.cloneDeep(n[e]));return t},r.map=function(n,t){Array.isArray(n)||(n=r._toArray(n));var e=[];return n.forEach((function(r,n,u){e.push(t(r,n,u))})),e},r._toArrayKey=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push({key:t,value:r[t]});return n},r._toArray=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push(r[t]);return n},r.filter=function(n,t){return Array.isArray(n)||(n=r._toArray(n)),n.filter(t)},r.isEqual=function(n,t){if(!(n instanceof Object)||!(t instanceof Object))return n===t;if(Object.keys(n).length!==Object.keys(t).length)return!1;for(var e in n){var u=n[e]instanceof Object,i=t[e]instanceof Object;if(u&&i)return r.isEqual(n[e],t[e]);if(n[e]!==t[e])return!1}return!0},r.pullAllWith=function(r,n,t){return n.forEach((function(n){r.filter((function(r){return t(r,n)})).forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)}))})),r},r.now=function(){return Date.now()},r.pullAll=function(r,n){return n.forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)})),r},r.forEachRight=function(n,t){Array.isArray(n)||(n=r._toArray(n));for(var e=n.length-1;e>=0;e--){if(!t(n[e]))break}},r.startsWith=function(r,n,t){return(r=r.substr(t)).startsWith(n)},r.endsWith=function(r,n,t){return(r=r.substr(t)).endsWith(n)},r.remove=function(n,t){var e=[],u=[];return n.forEach((function(r,n){t(r)&&(e.push(r),u.push(n))})),r._basePullAt(n,u),e},r._basePullAt=function(r,n){for(var t,e=r?n.length:0,u=e-1;e--;){var i=n[e];e!==u&&i===t||(t=i,Array.prototype.splice.call(r,i,1))}return r},r.findIndex=function(r,n,t){var e;if(r=r.slice(t),"function"==typeof n){for(e=0;e<r.length;e++)if(n(r[e]))return e}else if(Array.isArray(n))for(e=0;e<r.length;e++){var u=n[0],i=!0;if(n.length>1&&(i=n[1]),r[e][u]===i)return e}else for(e=0;e<r.length;e++)if(r[e]===n)return e;return-1},r.concat=function(){var r=arguments.length;if(!r)return[];for(var n=arguments[0],t=1;t<r;)n=n.concat(arguments[t]),t++;return n},r.isNumber=function(r){return"number"==typeof r},r.indexOf=function(r,n,t){return(r=r.slice(t)).indexOf(n)},r.join=function(r,n){if(null===r)return"";var t="";return r.forEach((function(r){t+=r+n})),t.substr(0,t.length-1)},r.split=function(r,n,t){return r.split(n,t)},r.max=function(r){if(r&&r.length){for(var n,t=0;t<r.length;t++)0===t?n=r[0]:n<r[t]&&(n=r[t]);return n}},r.drop=function(r,n){return(null===r?0:r.length)?r.slice(n):[]},r.flattenDeep=function(n){return n.reduce((function(n,t){return n.concat(Array.isArray(t)?r.flattenDeep(t):t)}),[])},r.uniq=function(r){var n=[];return r.forEach((function(r){-1===n.indexOf(r)&&n.push(r)})),n},r.isNaN=function(n){return r.isNumber(n)&&n!==+n},r.chunk=function(r,n){if(!(null===r?0:r.length)||n<1)return[];for(var t=[];r.length>n;)t.push(r.slice(0,n)),r=r.slice(n);return t.push(r),t},r.toFinite=function(r){var n=1/0;return r?(r=Number(r))===n||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0},r.isObject=function(r){var n=typeof r;return null!==r&&("object"===n||"function"===n)},r.isLength=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=r.MAX_SAFE_INTEGER},r._isArrayLike=function(n){return null!==n&&r.isLength(n.length)},r.maxBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t<r[u]&&(t=r[u],e=r[u]);return e}},r.minBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t>r[u]&&(t=n(r[u]),e=r[u]);return e}},r.sumBy=function(r,n){var t=0;for(var e in r)t+=n(r[e]);return t},r.countBy=function(r,n){var t={};for(var e in r){var u=n(e);t.hasOwnProperty(u)?t[u]+=1:t[u]=1}return t},r}()).MAX_SAFE_INTEGER=9007199254740991,e=u))||e);n._RF.pop()}}}));

System.register("chunks:///_virtual/logicManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./displayManager.ts","./clientEvent.ts","./constant.ts","./gameState.ts","./playerLogic.ts","./propLogic.ts","./util.ts","./gobeUtil.ts"],(function(e){"use strict";var t,a,r,n,i,o,c,s,m,p,l,h,u,E,_,A,f,g,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.createClass},function(e){o=e.cclegacy,c=e._decorator,s=e.Vec3,m=e.find,p=e.Component},function(e){l=e.DisplayManager},function(e){h=e.ClientEvent},function(e){u=e.Constant},function(e){E=e.PropType},function(e){_=e.PlayerLogic},function(e){A=e.PropLogic},function(e){f=e.Util},function(e){g=e.GobeUtil,M=e.ROOM_TYPE}],execute:function(){var y,T,d,G,I,S,v;o._RF.push({},"549cbz5PQRIrrDQ5jFvESJj","logicManager",void 0);var R=c.ccclass,L=c.property;e("LogicManager",(y=R("LogicManager"),T=L(_),d=L(A),y((S=t((I=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"playerLogic",S,n(t)),r(t,"propLogic",v,n(t)),t.currentGameState={},t._arrayGameState=[],t._startGameTime=0,t._isGameing=!1,t._frameIndex=0,t._isAiHit=!1,t}a(t,e);var o=t.prototype;return o.start=function(){this._onGetRoomInfo(),this.playerLogic.init(this),this.propLogic.init(this)},o.onEnable=function(){h.on(u.EVENT_NAME.ON_GAME_START,this._onStartGame,this),h.on(u.EVENT_NAME.ON_GAME_END,this._onEndGame,this),h.on(u.EVENT_NAME.CREATE_HAMMER,this._onCreateHammer,this)},o.onDisable=function(){h.off(u.EVENT_NAME.ON_GAME_START,this._onStartGame,this),h.off(u.EVENT_NAME.ON_GAME_END,this._onEndGame,this),h.off(u.EVENT_NAME.CREATE_HAMMER,this._onCreateHammer,this)},o._onEndGame=function(){this._isGameing&&(this._isGameing=!1,g.instance.finishGame())},o.setDefaultGameState=function(){this._arrayGameState=[],this.playerLogic.reset(),this.propLogic.reset(),this.currentGameState.id=0,this.currentGameState.props=this.propLogic.initProps(),this.currentGameState.players=this.playerLogic.initPlayer(),this.currentGameState.frameTime=Date.now(),this.currentGameState.createHammerTime=u.GAME_TIME-u.HAMMER_TIME,this._frameIndex=0},o._onGetRoomInfo=function(){var e=g.instance.roomPlayers,t=this.currentGameState.players;e.forEach((function(e,a){var r=0;g.instance.checkIsRoomOwner(e.playerId)||(r=1);var n=t[r];n.channel||(n.channel={}),n.channel.openId=e.playerId,n.channel.name=e.customPlayerProperties,n.channel.state=e.customPlayerStatus,n.channel.delayTime=0})),h.dispatchEvent(u.EVENT_NAME.ON_GAME_READY)},o._onStartGame=function(){this._isGameing=!0,this._startGameTime=JSON.parse(g.instance.room.customRoomProperties).time,this._arrayGameState[0]=f.clone(this.currentGameState);var e=this.currentGameState.players;this.playerLogic.updatePlayerNode(e)},o._onCreateHammer=function(e){this.currentGameState.props[this.propLogic.indexProp]=this.propLogic.generateProp(new s(e[0],e[1],e[2]),1,E.HAMMER),this.propLogic.indexProp++},o.checkIsReCovery=function(){var e=this;g.instance.isDisJoin&&this._handleAction((function(){e.scriptDisplayManager.updateStateRecovery(e.currentGameState),e.playerLogic.updateStateRecovery(),e.scriptDisplayManager.updateProp(e.currentGameState)}))},o.onCreateCoin=function(e){this.propLogic.createCoinServer(e)},o.lateUpdate=function(e){if((!g.instance.room||g.instance.roomType==M.START)&&this._isGameing){this._handleAction();var t=g.instance.time+g.instance.serverTimeDis;this.currentGameState.time=Math.floor(u.GAME_TIME-(t-this._startGameTime)/1e3),this.currentGameState.time<=0&&(this._isGameing=!1,g.instance.finishGame()),this.playerLogic.updateState(),this.scriptDisplayManager.updateOwnState(this.currentGameState,e),this.scriptDisplayManager.updateState(e,this.currentGameState,!1),this._checkPlayerScoreLead(),0==this.currentGameState.createHammerTime&&(this.currentGameState.createHammerTime=this.currentGameState.time-u.HAMMER_TIME,console.log("aaaaa",this.currentGameState.createHammerTime)),(!g.instance.isRoomOwnIn&&!g.instance.checkIsRoomOwner(g.instance.ownPlayerId)||g.instance.checkIsRoomOwner(g.instance.ownPlayerId))&&this.currentGameState.time<this.currentGameState.createHammerTime&&(console.log("aaaaaa",this.currentGameState.time,this.currentGameState.createHammerTime),this.currentGameState.createHammerTime=this.currentGameState.time-u.HAMMER_TIME,g.instance.createHammer(this.currentGameState.time-u.HAMMER_TIME))}},o._checkPlayerScoreLead=function(){var e=-1,t=0;for(var a in this.currentGameState.players){var r=this.currentGameState.players[a];r.channel&&t<r.score&&(t=r.score)}if(0!==t){for(var n=this.currentGameState.players.filter((function(e){return e.score===t})),i=0;i<n.length;i++){var o=n[i];if(o.isScoreLead){e=o.id;break}}-1===e&&(e=n[0].id),this.currentGameState.players.forEach((function(t){t.isScoreLead=t.id===e}))}},o._handleAction=function(e){var t=this;if(void 0===e&&(e=null),!(this._frameIndex>g.instance.currFrame)){var a=[];g.instance.recvMap.has(this._frameIndex)?(a=g.instance.recvMap.get(this._frameIndex),this._frameIndex++):this._frameIndex++;for(var r=function(){var e=a[n].playerId,r=t.currentGameState.players,m=r.filter((function(t){return t.channel&&t.channel.openId===e}));if(!m.length)return{v:void 0};i=a[n].data[0];var p=JSON.parse(i);switch(p.A){case u.ACTION.RUN:t.scriptDisplayManager.updateRun(e,t.currentGameState);break;case u.ACTION.IDLE:t.scriptDisplayManager.updateIdle(e,t.currentGameState);break;case u.ACTION.MOVE:1==p.AI?(r[u.AI_PLAYER].position=new s(p.X,0,p.Z),r[u.AI_PLAYER].eulerAngles=new s(0,p.V,0),t.playerLogic.move(u.AI_PLAYER,p.X,p.Z,p.V)):(m[0].position=new s(p.X,0,p.Z),m[0].eulerAngles=new s(0,p.V,0),m[0].moveX=p.MX,m[0].moveY=p.MY,t.playerLogic.move(m[0].id,p.X,p.Z,p.V));break;case u.ACTION.STOP_MOVE:t.playerLogic.stopMove(m[0],0,0,0);break;case u.ACTION.HEART_BEAT:m[0].channel.delayTime=p.V;break;case u.ACTION.HIT:1==p.AI?(t._isAiHit=!0,r[u.AI_PLAYER].attackPropType=E.HAMMER,r[u.AI_PLAYER].eulerAngles=new s(0,p.V,0)):(t._isAiHit=!1,m[0].attackPropType=E.HAMMER,m[0].eulerAngles=new s(0,p.V,0));break;case u.ACTION.IS_ATTACK_ED:t._isAiHit?(m[0].attackPropType=E.HAMMER_ED,o=0,m[0].score>10?(o=10,m[0].score-=10):(o=m[0].score,m[0].score=0),t.propLogic.createCoinByHammer(o,m[0].position)):r.filter((function(a){if(a.channel&&a.channel.openId!=e){a.attackPropType=E.HAMMER_ED;var r=0;a.score>10?(r=10,a.score-=10):(r=a.score,a.score=0),a.channel.openId!=g.instance.ownPlayerId&&t.propLogic.createCoinByHammer(r,a.position)}}));break;case u.ACTION.HAMMER:t.propLogic.removePropId(p.V)&&(1==p.AI?r[u.AI_PLAYER].hammerCount=1:m[0].hammerCount=1);break;case u.ACTION.ICON:t.propLogic.removePropId(p.V),1==p.AI?r[u.AI_PLAYER].score++:m[0].score++;break;case u.ACTION.CREATE_HAMMER:console.log("aaaaa",p),h.dispatchEvent(u.EVENT_NAME.CREATE_HAMMER,[p.X,p.Y,p.Z]),g.instance.hammerIndex=p.V+1,t.currentGameState.createHammerTime=p.T;break;case u.ACTION.CREATE_ICON:c=JSON.parse(p.I),h.dispatchEvent(u.EVENT_NAME.CREATE_COIN,c.coin_pos)}},n=0;n<a.length;n++){var i,o,c,m=r();if("object"==typeof m)return m.v}e&&e(),this._handleAction(e)}},i(t,[{key:"scriptDisplayManager",get:function(){var e;return null==(e=m("display"))?void 0:e.getComponent(l)}}]),t}(p)).prototype,"playerLogic",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(I.prototype,"propLogic",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=I))||G));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./coinTipsManager.ts","./displayManager.ts","./fighter.ts","./fighterModel.ts","./gameCamera.ts","./gameState.ts","./gobeUtil.ts","./logicManager.ts","./meshHandle.ts","./playerLogic.ts","./propBase.ts","./propLogic.ts","./virtualPlayer.ts","./audioManager.ts","./clientEvent.ts","./constant.ts","./csvManager.ts","./effectManager.ts","./localConfig.ts","./lodash.ts","./playerData.ts","./poolManager.ts","./resourceUtil.ts","./storageManager.ts","./uiManager.ts","./util.ts","./staticBatch.ts","./tips.ts","./easy_touch.ts","./easy_touch_panel.ts","./down_off_panel.ts","./fightUI.ts","./gameOver.ts","./join_room_panel.ts","./match_panel.ts","./media_panel.ts","./message_item.ts","./message_panel.ts","./readyGo.ts","./select_panel.ts","./start_panel.ts","./tip_panel.ts","./transition_bg_panel.ts","./transition_panel.ts","./ready.ts","./select.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/match_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,n,a,c,o,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,o=t.Label,l=t.Component}],execute:function(){var s,p,u,h,f;a._RF.push({},"580efALErNO9pD9uGFLj9XL","match_panel",void 0);var m=c.ccclass,_=c.property;t("MatchPanel",(s=m("MatchPanel"),p=_(o),s((f=e((h=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,r(e,"txtTip",f,n(e)),e._matchTime=0,e}i(e,t);var a=e.prototype;return a.show=function(){this._matchTime=0},a.update=function(t){this._matchTime+=t,this.txtTip.string="当前等待时长为"+Math.floor(this._matchTime)+"秒"},e}(l)).prototype,"txtTip",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=h))||u));a._RF.pop()}}}));

System.register("chunks:///_virtual/media_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gobeUtil.ts","./constant.ts","./clientEvent.ts","./uiManager.ts"],(function(e){"use strict";var i,n,t,s,a,o,c,l,r,p,h,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Node,l=e.Component},function(e){r=e.GobeUtil},function(e){p=e.Constant},function(e){h=e.ClientEvent},function(e){u=e.UIManager}],execute:function(){var m,M,g,v,O,f,E,d,_,C,N,b,A,y,P,S,z;a._RF.push({},"5cde57S4PhIcoNLWEezz3Iy","media_panel",void 0);var w=o.ccclass,D=o.property;e("MediaPanel",(m=w("MediaPanel"),M=D(c),g=D(c),v=D(c),O=D(c),f=D(c),E=D(c),d=D(c),m((N=i((C=function(e){function i(){for(var i,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return i=e.call.apply(e,[this].concat(a))||this,t(i,"mediaOpen",N,s(i)),t(i,"mediaClose",b,s(i)),t(i,"micClose",A,s(i)),t(i,"micOpen",y,s(i)),t(i,"noMessageOpen",P,s(i)),t(i,"messageClose",S,s(i)),t(i,"messageOpen",z,s(i)),i._isOpenMessage=!1,i._isFirstOpenM=!0,i}n(i,e);var a=i.prototype;return a.onEnable=function(){h.on(p.EVENT_NAME.SEND_MSG,this._onSendMsg,this),h.on(p.EVENT_NAME.OPEN_MEDIA,this._openMedia,this),h.on(p.EVENT_NAME.OPEN_CHANNEL,this._openChannel,this)},a.onDisable=function(){h.off(p.EVENT_NAME.SEND_MSG,this._onSendMsg,this),h.off(p.EVENT_NAME.OPEN_MEDIA,this._openMedia,this),h.off(p.EVENT_NAME.OPEN_CHANNEL,this._openChannel,this)},a._openMedia=function(){r.instance.isOpenMedia?(this.mediaClose.active=!0,this.mediaOpen.active=!1,this.micClose.active=!0,this.micOpen.active=!1):(this.mediaClose.active=!1,this.mediaOpen.active=!1,this.micClose.active=!1,this.micOpen.active=!1)},a._openChannel=function(){r.instance.isChannelId?(this.noMessageOpen.active=!0,this.messageClose.active=!1,this.messageOpen.active=!1):(this.noMessageOpen.active=!1,this.messageClose.active=!1,this.messageOpen.active=!1)},a.show=function(){this._isFirstOpenM=!0,this.mediaClose.active=!1,this.mediaOpen.active=!1,this.micClose.active=!1,this.micOpen.active=!1,this.noMessageOpen.active=!1,this.messageClose.active=!1,this.messageOpen.active=!1},a.onClickOpenMedia=function(){r.instance.mediaMuteAllPlayers(!0),this.mediaClose.active=!1,this.mediaOpen.active=!0},a.onClickCloseMedia=function(){r.instance.mediaMuteAllPlayers(!1),this.mediaClose.active=!0,this.mediaOpen.active=!1},a.onOpenMic=function(){r.instance.mediaEnableMic(!0),this.micClose.active=!1,this.micOpen.active=!0},a.onCloseMic=function(){r.instance.mediaEnableMic(!1),this.micClose.active=!0,this.micOpen.active=!1},a.onOpenMessage=function(){this._isOpenMessage=!0,u.instance.showDialog(p.PANEL_NAME.MESSAGE_PANEL,[this._isFirstOpenM]),this.messageClose.active=!0,this.noMessageOpen.active=!1,this.messageOpen.active=!1,this._isFirstOpenM=!1},a.onCloseMessage=function(){this._isOpenMessage=!1,u.instance.hideDialog(p.PANEL_NAME.MESSAGE_PANEL),this.messageClose.active=!1,this.noMessageOpen.active=!0,this.messageOpen.active=!1},a._onSendMsg=function(e){""==e||this._isOpenMessage||(this.noMessageOpen.active=!1,this.messageOpen.active=!0)},i}(l)).prototype,"mediaOpen",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(C.prototype,"mediaClose",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(C.prototype,"micClose",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(C.prototype,"micOpen",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(C.prototype,"noMessageOpen",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(C.prototype,"messageClose",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(C.prototype,"messageOpen",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=C))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/meshHandle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,s,o,i,h,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,s=e.assertThisInitialized,o=e.createClass},function(e){i=e.cclegacy,h=e._decorator,a=e.MeshRenderer,l=e.Component}],execute:function(){var c,p,u,d,f;i._RF.push({},"0bf32ApFU5Mu6jx9+9tx9KG","meshHandle",void 0);var M=h.ccclass,y=h.property;e("MeshHandle",(c=M("MeshHandle"),p=y({serializable:!0}),c((f=t((d=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,r(t,"_showMesh",f,s(t)),t}n(t,e);var i=t.prototype;return i.start=function(){"undefined"!=typeof Editor&&this.handleMesh()},i.handleMesh=function(e){void 0===e&&(e=null);var t=(e=e||this.node).getComponent(a);t&&(t.enabled=this._showMesh);for(var n=e.children,r=0,s=n.length;r<s;r++)this.handleMesh(n[r])},o(t,[{key:"showMesh",get:function(){return this._showMesh},set:function(e){this._showMesh=e,this.handleMesh()}}]),t}(l)).prototype,"_showMesh",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(d.prototype,"showMesh",[y],Object.getOwnPropertyDescriptor(d.prototype,"showMesh"),d.prototype),u=d))||u));i._RF.pop()}}}));

System.register("chunks:///_virtual/message_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gobeUtil.ts","./clientEvent.ts","./constant.ts"],(function(e){"use strict";var t,i,n,a,s,o,r,l,c,u,h,m,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,r=e.Node,l=e.UITransform,c=e.Label,u=e.Component},function(e){h=e.GobeUtil},function(e){m=e.ClientEvent},function(e){g=e.Constant}],execute:function(){var d,p,T,f,v,y,b,I,x,w,G,z,B;s._RF.push({},"0a4baNgkbVIv6eDZoYzABKa","message_item",void 0);var U=o.ccclass,F=o.property;e("MessageItem",(d=U("MessageItem"),p=F(r),T=F(r),f=F(l),v=F(r),y=F(c),d((x=t((I=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,n(t,"headBoy",x,a(t)),n(t,"headGirl",w,a(t)),n(t,"messageUITF",G,a(t)),n(t,"msgTxtNode",z,a(t)),n(t,"nameTxt",B,a(t)),t.msgTxtUITF=null,t.msgTxt=null,t}return i(t,e),t.prototype.show=function(e){var t=this;null==this.msgTxtUITF&&(this.msgTxtUITF=this.msgTxtNode.getComponent(l)),null==this.msgTxt&&(this.msgTxt=this.msgTxtNode.getComponent(c)),this.nameTxt.string=e.sendId,e.isOwn?null==h.instance.room?(this.headBoy.active=!1,this.headGirl.active=!0):h.instance.checkIsRoomOwner(h.instance.ownPlayerId)?(this.headBoy.active=!0,this.headGirl.active=!1):(this.headBoy.active=!1,this.headGirl.active=!0):null==h.instance.room?(this.headBoy.active=!0,this.headGirl.active=!1):h.instance.checkIsRoomOwner(h.instance.ownPlayerId)?(this.headBoy.active=!1,this.headGirl.active=!0):(this.headBoy.active=!0,this.headGirl.active=!1),this.msgTxt.string=e.content,setTimeout((function(){var e=t.msgTxtUITF.contentSize.height;t.messageUITF.setContentSize(291,e+10),e<60&&(e=60),m.dispatchEvent(g.EVENT_NAME.SEND_MSG_HEIGHT,e+50)}),100)},t}(u)).prototype,"headBoy",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(I.prototype,"headGirl",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(I.prototype,"messageUITF",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(I.prototype,"msgTxtNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(I.prototype,"nameTxt",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=I))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/message_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./constant.ts","./gobeUtil.ts","./clientEvent.ts","./poolManager.ts","./message_item.ts"],(function(t){"use strict";var i,e,n,o,r,s,c,a,u,l,h,p,d,f,g,_,b,N,v,T;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Node,a=t.Prefab,u=t.EditBox,l=t.ProgressBar,h=t.Label,p=t.UITransform,d=t.ScrollView,f=t.Component},function(t){g=t.UIManager},function(t){_=t.Constant},function(t){b=t.GobeUtil},function(t){N=t.ClientEvent},function(t){v=t.PoolManager},function(t){T=t.MessageItem}],execute:function(){var M,S,m,E,I,w,x,R,y,P,V,z,O,C,A,B,D,U,L,F,G,H,Y,k,J,j,Q,W,Z,q,K,X,$;r._RF.push({},"6c443NZI4JMQakMDFNfJr38","message_panel",void 0);var tt=s.ccclass,it=s.property;t("MessagePanel",(M=tt("MessagePanel"),S=it(c),m=it(a),E=it(a),I=it(c),w=it(c),x=it(u),R=it(c),y=it(c),P=it(l),V=it(h),z=it(h),O=it(p),C=it(p),A=it(d),B=it(h),M((L=i((U=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,n(i,"content",L,o(i)),n(i,"leftPrefab",F,o(i)),n(i,"rightPrefab",G,o(i)),n(i,"startNode",H,o(i)),n(i,"inputNode",Y,o(i)),n(i,"editBox",k,o(i)),i._currY=-45,n(i,"voiceInputNode",J,o(i)),n(i,"voiceNode",j,o(i)),n(i,"bar",Q,o(i)),n(i,"barTxt",W,o(i)),n(i,"inputTxt",Z,o(i)),n(i,"inputSpUIF",q,o(i)),n(i,"inputTxtUIF",K,o(i)),n(i,"scrollView",X,o(i)),n(i,"labelTxt",$,o(i)),i._isMsgShow=!1,i._isRecording=!1,i._isEffectRecording=!1,i._recordTime=0,i}e(i,t);var r=i.prototype;return r.show=function(t){this.startNode.active=!0,this.inputNode.active=!1,this.voiceInputNode.active=!1,this.voiceNode.active=!1,null==b.instance.room||b.instance.room.players.length<2?this.labelTxt.string=_.ROOM_TIPS.WORLD_LABEL:this.labelTxt.string=_.ROOM_TIPS.ROOM_LABEL+b.instance.room.roomCode,t&&(this._clearItem(),this._currY=-45),this._onSendMsg()},r.onEnable=function(){N.on(_.EVENT_NAME.SEND_MSG,this._onSendMsg,this),N.on(_.EVENT_NAME.SEND_MSG_HEIGHT,this._onSendMsgHeight,this),N.on(_.EVENT_NAME.SEND_VT,this._onSendVT,this)},r.onDisable=function(){N.off(_.EVENT_NAME.SEND_MSG,this._onSendMsg,this),N.off(_.EVENT_NAME.SEND_MSG_HEIGHT,this._onSendMsgHeight,this),N.off(_.EVENT_NAME.SEND_VT,this._onSendVT,this)},r.onControlIM=function(){this.startNode.active=!0,this.inputNode.active=!1,this.voiceInputNode.active=!1,this.editBox.string=""},r.onStartIM=function(){this.startNode.active=!1,this.inputNode.active=!0},r.onClickInput=function(){""!=this.editBox.string?(b.instance.sendTextMsg(this.editBox.string),this.editBox.string="",this.voiceNode.active=!1,this.voiceInputNode.active=!1,this.inputNode.active=!1,this.startNode.active=!0):g.instance.showTips(_.ROOM_TIPS.INPUT_MSG)},r.onClickVInput=function(){""!=this.inputTxt.string?(b.instance.sendTextMsg(this.inputTxt.string),this.inputTxt.string="",this.voiceNode.active=!1,this.voiceInputNode.active=!1,this.inputNode.active=!1,this.startNode.active=!0):g.instance.showTips(_.ROOM_TIPS.INPUT_MSG)},r._onSendMsg=function(){if(!this._isMsgShow&&b.instance.msgLst.length>0){this._isMsgShow=!0;var t,i=b.instance.msgLst[0];if(i.isOwn)(t=v.instance.getNode(this.rightPrefab,this.content)).setPosition(45,this._currY,0),t.getComponent(T).show(i);else(t=v.instance.getNode(this.leftPrefab,this.content)).setPosition(45,this._currY,0),t.getComponent(T).show(i);b.instance.msgLst.splice(0,1)}},r._onSendMsgHeight=function(t){var i;this._isMsgShow=!1,this._currY-=t-10,null==(i=this.content.getComponent(p))||i.setContentSize(424,-1*this._currY),this._currY<-570&&this.scrollView.scrollToBottom(),this._onSendMsg()},r.update=function(t){this._isRecording&&(this._recordTime+=t,this.bar.progress=.2*this._recordTime,this.barTxt.string=this._recordTime.toFixed(2)+"秒",this._recordTime>=5&&this.onStopVoice())},r._onSendVT=function(t){var i=this;if(""==t)return g.instance.showTips(_.ROOM_TIPS.VT_ERROR),this.voiceNode.active=!1,this.voiceInputNode.active=!1,this.inputNode.active=!1,this.startNode.active=!0,void(this._isEffectRecording=!1);this._isEffectRecording&&(this.voiceNode.active=!1,this.voiceInputNode.active=!0,this.inputTxt.string=t,setTimeout((function(){i.inputSpUIF.setContentSize(314,i.inputTxtUIF.contentSize.height+7)}))),this._isEffectRecording=!1},r.onClickStartVoice=function(){this.voiceNode.active=!0,this.startNode.active=!1,b.instance.startRecordAudioToText(),this._isRecording=!0,this._isEffectRecording=!0,this._recordTime=0},r.onCancelVoice=function(){b.instance.stopRecordAudioToText(),this.voiceNode.active=!1,this.voiceInputNode.active=!1,this.startNode.active=!0,this._isRecording=!1,this._isEffectRecording=!1},r.onStopVoice=function(){b.instance.stopRecordAudioToText(),this._isRecording=!1},r._clearItem=function(){for(var t=this.content.children.length-1;t>-1;t--)v.instance.putNode(this.content.children[t])},i}(f)).prototype,"content",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(U.prototype,"leftPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(U.prototype,"rightPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(U.prototype,"startNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(U.prototype,"inputNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(U.prototype,"editBox",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(U.prototype,"voiceInputNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(U.prototype,"voiceNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(U.prototype,"bar",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(U.prototype,"barTxt",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(U.prototype,"inputTxt",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(U.prototype,"inputSpUIF",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(U.prototype,"inputTxtUIF",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(U.prototype,"scrollView",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(U.prototype,"labelTxt",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=U))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/playerData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./storageManager.ts"],(function(t){"use strict";var e,n,s,i,a,o,r;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){s=t.cclegacy,i=t._decorator,a=t.Component},function(t){o=t.Constant},function(t){r=t.StorageManager}],execute:function(){var c,h;s._RF.push({},"e5927B2lO9C6o5eLg2NmcKB","playerData",void 0);var u=i.ccclass;i.property,t("PlayerData",u("PlayerData")(((h=function(t){function s(){for(var e,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))||this).serverTime=0,e.localTime=0,e._userId="",e._playerInfo=null,e._history=null,e._settings=null,e._isNewBee=!1,e._dataVersion="",e.isInit=!1,e._easyTouchInfo={},e}e(s,t);var i=s.prototype;return i.loadGlobalCache=function(){var t=r.instance.getUserId();t&&(this._userId=t)},i.loadFromCache=function(){this.loadGlobalCache(),this.userId||this.generateRandomAccount(),this._playerInfo=this._loadDataByKey(o.LOCAL_CACHE.PLAYER),this._history=this._loadDataByKey(o.LOCAL_CACHE.HISTORY),this._settings=this._loadDataByKey(o.LOCAL_CACHE.SETTINGS)},i._loadDataByKey=function(t){var e={},n=r.instance.getConfigData(t);if(n)try{e=JSON.parse(n)}catch(t){e={}}return e},i.createPlayerInfo=function(t){if(this._playerInfo={},t)for(var e in t)this._playerInfo[e]=t[e];this.savePlayerInfoToLocalCache()},i.generateRandomAccount=function(){this.userId=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),r.instance.setUserId(this._userId)},i.saveAccount=function(t){this._userId=t,r.instance.setUserId(t)},i.savePlayerInfoToLocalCache=function(){r.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},i.saveSettingsToLocalCache=function(){r.instance.setConfigData(o.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings)),r.instance.save()},i.saveAll=function(){r.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo)),r.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.HISTORY,JSON.stringify(this._history)),r.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings)),r.instance.setConfigData(o.LOCAL_CACHE.DATA_VERSION,this._dataVersion)},i.updatePlayerInfo=function(t,e){this._playerInfo[t]=e,r.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},i.getSetting=function(t){return this._settings&&this._settings.hasOwnProperty(t)?this._settings[t]:null},i.setSetting=function(t,e){this._settings||(this._settings={}),this._settings[t]=e,this.saveSettingsToLocalCache()},i.clear=function(){this._playerInfo={},this._settings={},this.saveAll()},i.updateEasyTouchInfo=function(t,e){this._easyTouchInfo[t]=e},i.getEasyTouchInfo=function(t){return this._easyTouchInfo.hasOwnProperty(t)||(this._easyTouchInfo[t]=0),this._easyTouchInfo[t]},n(s,[{key:"userId",get:function(){return this._userId},set:function(t){this._userId=t}},{key:"settings",get:function(){return this._settings},set:function(t){this._settings=t}},{key:"playerInfo",get:function(){return this._playerInfo}},{key:"history",get:function(){return this._history}},{key:"isNewBee",get:function(){return this._isNewBee},set:function(t){this._isNewBee=t}}],[{key:"instance",get:function(){return this._instance||(this._instance=new s),this._instance}}]),s}(a))._instance=void 0,c=h))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/playerLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./virtualPlayer.ts","./constant.ts","./poolManager.ts"],(function(t){"use strict";var e,r,a,i,n,o,c,l,s,u,p,y,d,f,h,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,c=t.Vec3,l=t.Prefab,s=t.Node,u=t.ModelComponent,p=t.geometry,y=t.math,d=t.Component},function(t){f=t.VirtualPlayer},function(t){h=t.Constant},function(t){P=t.PoolManager}],execute:function(){var v,_,g,S,b,m,A;n._RF.push({},"2176apmEQ1HSa37kyBFOpny","playerLogic",void 0);var w=o.ccclass,O=o.property,V=new c,N=new c;t("PlayerLogic",(v=w("PlayerLogic"),_=O(l),g=O(s),v((m=e((b=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,a(e,"virtualPlayerPrefab",m,i(e)),a(e,"obstacleGroupNode",A,i(e)),e._dicPlayers={},e._dicScriptVirtualPlayers={},e._parent=null,e}r(e,t);var n=e.prototype;return n.init=function(t){this._parent=t},n.reset=function(){var t=this;Object.keys(this._dicPlayers).forEach((function(e){P.instance.putNode(t._dicPlayers[parseInt(e)]),delete t._dicPlayers[parseInt(e)]}))},n.initPlayer=function(){for(var t=[],e=0;e<h.MAX_PLAYER;e++){var r={},a=new c(-50,0,0),i=new c(0,90,0);switch(e){case 0:break;case 1:a.set(50,0,0),i.set(0,-90,0)}r.id=e,r.position=a,r.eulerAngles=i,r.score=0,r.hammerCount=0,r.moveX=0,r.moveY=0,r.isShowReward=!1,r.isScoreLead=!1,t[e]=r;var n=P.instance.getNode(this.virtualPlayerPrefab,this.node);n.setPosition(a),n.eulerAngles=i,this._dicPlayers[e]=n;var o=n.getComponent(f);o.init(a),this._dicScriptVirtualPlayers[e]=o}return t},n.updatePlayerNode=function(t){var e=this;t.forEach((function(t,r){var a=e._dicPlayers[r];t.channel?a.active=!0:a.active=!1}))},n.stopMove=function(t,e,r,a){this._dicScriptVirtualPlayers[t.id].playAction({action:h.ACTION.STOP_MOVE,posX:e,posZ:r,angleY:a})},n.stopMoveAndAttack=function(t,e,r,a){this._dicScriptVirtualPlayers[t.id].playAction({action:h.ACTION.IS_ATTACK_ED,posX:e,posZ:r,angleY:a})},n.move=function(t,e,r,a){this._dicScriptVirtualPlayers[t].playAction({action:h.ACTION.MOVE,posX:e,posZ:r,angleY:a})},n.updateStateRecovery=function(){for(var t in this._dicScriptVirtualPlayers){if(Object.prototype.hasOwnProperty.call(this._dicScriptVirtualPlayers,t))this._dicScriptVirtualPlayers[t].playActionRecovery()}},n.updateState=function(){for(var t in this._dicScriptVirtualPlayers){if(Object.prototype.hasOwnProperty.call(this._dicScriptVirtualPlayers,t))this._dicScriptVirtualPlayers[t].updateState(this._parent.currentGameState.players[t],this._parent)}},n.intersectWithObstacle=function(t,e,r,a){for(var i=this.obstacleGroupNode.getComponentsInChildren(u),n=0;n<i.length;n++)if(i[n].node.active){var o=i[n],l=new p.OBB,s=new p.OBB;if(l.halfExtents=c.multiplyScalar(V,r,.5*a.x),s.halfExtents=c.multiplyScalar(N,o.node.scale,.5*o.node.parent.scale.x),l.translateAndRotate(t,e,l),s.translateAndRotate(o.node.worldMatrix,o.node.worldRotation,s),p.intersect.obbWithOBB(l,s))return!0}return!1},n.getPlayerByIndex=function(t){return this._dicPlayers[t]},n.getNearestEnemy=function(t,e){var r=y.bits.INT_MAX,a=null,i=this._parent.currentGameState.players;for(var n in i){var o=i[n];if(o.channel&&o.channel.openId!==t){var l=c.squaredDistance(o.position,e);l<r&&(r=l,a=o)}}return a},e}(d)).prototype,"virtualPlayerPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(b.prototype,"obstacleGroupNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=b))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/poolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,e,n,i,a;return{setters:[function(t){o=t.createClass},function(t){e=t.cclegacy,n=t._decorator,i=t.instantiate,a=t.NodePool}],execute:function(){var r,c;e._RF.push({},"e4ab6T5/1VCqK/Vn+UcADNM","poolManager",void 0);var s=n.ccclass;n.property,t("PoolManager",s("PoolManager")(((c=function(){function t(){this._dictPool={},this._dictPrefab={}}var e=t.prototype;return e.getNode=function(t,o){var e=t.name;t.position||(e=t.data.name),this._dictPrefab[e]=t;var n=null;if(this._dictPool.hasOwnProperty(e)){var r=this._dictPool[e];n=r.size()>0?r.get():i(t)}else{var c=new a;this._dictPool[e]=c,n=i(t)}return n.parent=o,n.active=!0,n},e.putNode=function(t){if(t){var o=t.name,e=null;this._dictPool.hasOwnProperty(o)?e=this._dictPool[o]:(e=new a,this._dictPool[o]=e),e.put(t)}},e.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},e.prePool=function(t,o){var e=t.name,n=new a;this._dictPool[e]=n;for(var r=0;r<o;r++){var c=i(t);n.put(c)}},o(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,r=c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/propBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,o,r,s,i;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,r=e.Tween,s=e.Vec3,i=e.Component}],execute:function(){var l;t._RF.push({},"93380fTAhxF9pqyIPHa1YqD","propBase",void 0);var a=o.ccclass;o.property,e("PropBase",a("PropBase")(l=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(n=e.call.apply(e,[this].concat(o))||this)._tween=null,n._dropTween=null,n._propInfo=null,n._isDisappearEffShowing=!1,n._parentName="",n._prop=null,n._disappearCb=null,n._targetEuler=new s(0,-360,0),n._oriEuler=new s,n}n(t,e);var o=t.prototype;return o.onDisable=function(){this.unscheduleAllCallbacks()},o.show=function(e){var n,t=this;this.node.eulerAngles=this._oriEuler,this._tween&&(this._tween.stop(),this._tween=null),this._tween=new r(this.node).to(3*e.scale,{eulerAngles:this._targetEuler}).call((function(){t.node.eulerAngles=t._oriEuler})).union().repeatForever().start(),this._propInfo=e,this._parentName=null==(n=this.node.parent)?void 0:n.name,this._isDisappearEffShowing=!1},o.drop=function(e){var n=this,t=this.node.position.clone().subtract(e).length();this._dropTween=new r(this.node).to(t/10,{position:e}).call((function(){n._dropTween=null,n.node.setPosition(e)})).start()},o.updateState=function(e,n){this._prop=n},t}(i))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/propLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./gameState.ts","./util.ts","./constant.ts","./gobeUtil.ts"],(function(e){"use strict";var t,r,n,i,o,a,s,p,d,c,l,h,P,u,f,v,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Vec3,p=e.Prefab,d=e.ModelComponent,c=e.geometry,l=e.clamp,h=e.Component},function(e){P=e.PoolManager},function(e){u=e.PropType},function(e){f=e.Util},function(e){v=e.Constant},function(e){m=e.GobeUtil}],execute:function(){var x,g,w,C,y,_,M;o._RF.push({},"1e563P/T2tP+Ivr4OJZMArO","propLogic",void 0);var b=a.ccclass,A=a.property,I=new s,O=new s;new s,e("PropLogic",(x=b("PropLogic"),g=A(p),w=A(p),x((_=t((y=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"virtualCoinPrefab",_,i(t)),n(t,"virtualHammerPrefab",M,i(t)),t.indexProp=0,t._dicProps={},t._parent=null,t}r(t,e);var o=t.prototype;return o.init=function(e){this._parent=e},o.reset=function(){var e=this;Object.keys(this._dicProps).forEach((function(t){P.instance.putNode(e._dicProps[parseInt(t)]),delete e._dicProps[parseInt(t)]}))},o.initProps=function(){var e=[];this.indexProp=0;for(var t=0;t<36;t++){var r=Math.floor(t/6),n=Math.floor(t%6);r>=2&&r<=3&&n>=2&&n<=3||(e[this.indexProp]=this.generateProp(new s(3.5*n-9,1,6-3*r)),this.indexProp++)}for(var i=0;i<7;i++)e[this.indexProp]=this.generateProp(new s(6*i-18,1,-16)),this.indexProp++,e[this.indexProp]=this.generateProp(new s(6*i-18,1,14)),this.indexProp++;for(var o=0;o<12;o++)e[this.indexProp]=this.generateProp(new s(5*o-29,1,-24)),this.indexProp++,e[this.indexProp]=this.generateProp(new s(5*o-29,1,22.5)),this.indexProp++;for(var a=0;a<4;a++)e[this.indexProp]=this.generateProp(new s(-18,1,6*a-10)),this.indexProp++,e[this.indexProp]=this.generateProp(new s(18,1,6*a-10)),this.indexProp++;for(var p=0;p<5;p++)e[this.indexProp]=this.generateProp(new s(-29,1,5*p-10)),this.indexProp++,e[this.indexProp]=this.generateProp(new s(29,1,5*p-10)),this.indexProp++;for(var d=0;d<9;d++)e[this.indexProp]=this.generateProp(new s(-36,1,5*d-21)),this.indexProp++,e[this.indexProp]=this.generateProp(new s(36,1,5*d-21)),this.indexProp++;return e},o.removeOverProp=function(e){for(var t=Object.keys(this._dicProps),r=e;r<t.length;r++)this._dicProps[r]&&(P.instance.putNode(this._dicProps[r]),delete this._dicProps[r])},o.removePropId=function(e){var t=this._parent.currentGameState.props[e];return!(!t||(t.exist=!1,!this._dicProps[t.id]))&&(P.instance.putNode(this._dicProps[t.id]),delete this._dicProps[t.id],!0)},o.removeProp=function(e){P.instance.putNode(this._dicProps[e.id]),delete this._dicProps[e.id],e.exist=!1},o.generateProp=function(e,t,r,n,i){void 0===t&&(t=1),void 0===r&&(r=u.COIN);var o={};return o.id=this.indexProp,o.position=e,o.scale=t,o.exist=!0,o.type=r,this._dicProps[this.indexProp]=this._generatePropNode(o),o},o._generatePropNode=function(e){var t=this.virtualCoinPrefab;e.type===u.HAMMER&&(t=this.virtualHammerPrefab);var r=P.instance.getNode(t,this.node);return r.setWorldPosition(e.position),r},o.handleProp=function(e,t,r){var n=this,i=this._parent.currentGameState.props,o=Object.keys(this._dicProps),a=t.getComponentInChildren(d);o.forEach((function(o){var p=i[parseInt(o)];if(!(p.type===u.HAMMER&&e.hammerCount||p.removed)){var l=n._dicProps[parseInt(o)];if(!(f.getTwoNodeXZLength(l,t)>=5)){var h=l.getComponentInChildren(d),P=new c.OBB,x=new c.OBB;if(P.halfExtents=s.multiplyScalar(I,a.node.scale,.5*a.node.parent.scale.x),x.halfExtents=s.multiplyScalar(O,h.node.scale,.5*h.node.parent.scale.x),P.translateAndRotate(a.node.worldMatrix,a.node.worldRotation,P),x.translateAndRotate(h.node.worldMatrix,h.node.worldRotation,x),c.intersect.obbWithOBB(P,x)){if(p.type===u.HAMMER&&0!==e.hammerCount)return;if(p.type===u.HAMMER)p.removed=!0,r?m.instance.sendFrame({A:v.ACTION.HAMMER,V:p.id,AI:1}):m.instance.sendFrame({A:v.ACTION.HAMMER,V:p.id});else if(p.type===u.COIN){if(!n._dicProps[p.id])return;p.removed=!0,r?m.instance.sendFrame({A:v.ACTION.ICON,V:p.id,AI:1}):m.instance.sendFrame({A:v.ACTION.ICON,V:p.id})}}}}}))},o.randomDropPos=function(e,t,r){void 0===r&&(r=6);var n,i=new s,o=0;t===u.COIN?n=this.virtualCoinPrefab.data:t===u.HAMMER&&(n=this.virtualHammerPrefab.data);do{var a=r+o/10,p=r+o/10,d=-a+Math.random()*a*2,c=-p+Math.random()*p*2;if(d+=e.x,c+=e.z,d=l(d,-28,28),c=l(c,-24,24),i.set(d,1,c),++o>=50){console.log("randomDropPos,posNew",i,"posWorld",e,"propType",t,"radius",r),i=null;break}}while(this._canPlaced(i,n));return i},o._canPlaced=function(e,t){var r,n=null==(r=this.node.parent)?void 0:r.getComponentsInChildren(d),i=t.getComponentInChildren(d);t.setWorldPosition(e);for(var o=0;o<n.length;o++)if(n[o].node.active){var a=n[o],p=new c.OBB,l=new c.OBB;if(p.halfExtents=s.multiplyScalar(I,i.node.scale,.5*i.node.parent.scale.x),p.halfExtents.y*=2,l.halfExtents=s.multiplyScalar(O,a.node.scale,.5*a.node.parent.scale.x),p.translateAndRotate(i.node.worldMatrix,i.node.worldRotation,p),l.translateAndRotate(a.node.worldMatrix,a.node.worldRotation,l),c.intersect.obbWithOBB(p,l))return!0}return!1},o.getCoinNum=function(e){return e.filter((function(e){return e.type===u.COIN&&e.exist})).length},o.getHammerNum=function(e){return e.filter((function(e){return e.type===u.HAMMER&&e.exist})).length},o.createCoinByHammer=function(e,t,r){void 0===r&&(r=6);for(var n=[],i=0;i<e;i++){var o=this.randomDropPos(t,u.COIN,r);o&&n.push([o.x,o.y,o.z])}m.instance.createCoin(n)},o.createCoinServer=function(e){for(var t=0;t<e.length;t++){var r=this.generateProp(new s(e[t][0],e[t][1],e[t][2]));this._parent.currentGameState.props[this.indexProp]=r,r.dropPosition=new s(e[t][0],e[t][1],e[t][2]),this._dicProps[this.indexProp].setWorldPosition(r.dropPosition),this.indexProp++}},t}(h)).prototype,"virtualCoinPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(y.prototype,"virtualHammerPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=y))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/ready.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gobeUtil.ts","./clientEvent.ts","./constant.ts","./poolManager.ts","./effectManager.ts","./uiManager.ts"],(function(e){"use strict";var i,t,n,a,o,r,l,s,c,u,h,y,f,p,_,E,d,N,b,m,P;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.AnimationComponent,s=e.Node,c=e.LabelComponent,u=e.SpriteComponent,h=e.SpriteFrame,y=e.Label,f=e.Animation,p=e.Component},function(e){_=e.GobeUtil,E=e.WIFI_TYPE},function(e){d=e.ClientEvent},function(e){N=e.Constant},function(e){b=e.PoolManager},function(e){m=e.EffectManager},function(e){P=e.UIManager}],execute:function(){var g,v,A,w,R,O,M,I,S,T,L,C,D,F,z,H,Y,k,B,J,G,V,x,U,W,j,q,K,Q;o._RF.push({},"20039gcGzFNu5iBC0qjuHn8","ready",void 0);var X=r.ccclass,Z=r.property;e("Ready",(g=X("Ready"),v=Z(l),A=Z([s]),w=Z([s]),R=Z([c]),O=Z([u]),M=Z([h]),I=Z(s),S=Z(s),T=Z(s),L=Z(y),C=Z(f),D=Z(s),F=Z(s),g((Y=i((H=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return i=e.call.apply(e,[this].concat(o))||this,n(i,"animation",Y,a(i)),n(i,"aryPlayerWait",k,a(i)),n(i,"aryPlayer",B,a(i)),n(i,"aryPlayerName",J,a(i)),n(i,"aryPlayerHead",G,a(i)),n(i,"aryHead",V,a(i)),n(i,"leftNode",x,a(i)),n(i,"rightNode",U,a(i)),n(i,"btnClose",W,a(i)),n(i,"txtNum",j,a(i)),n(i,"vsAni",q,a(i)),n(i,"girlNode",K,a(i)),n(i,"boyNode",Q,a(i)),i._vsNode=null,i._isShowAni=!1,i._isFightOpen=!1,i}t(i,e);var o=i.prototype;return o.onEnable=function(){b.instance.putNode(this._vsNode),d.on(N.EVENT_NAME.ON_OTHER_JOIN_ROOM,this._onOtherJoinRoom,this)},o.onDisable=function(){this._cleanModel(),d.off(N.EVENT_NAME.ON_OTHER_JOIN_ROOM,this._onOtherJoinRoom,this)},o.show=function(e){var i=this;void 0===e&&(e=!1),this._isFightOpen=e,this._isShowAni=!1,this.txtNum.string="房间号："+_.instance.room.roomCode;for(var t=this.aryPlayerHead.length,n=0;n<t;n++)this._showPlayerReady(n,!1);this.animation.play(),this.animation.once(f.EventType.FINISHED,(function(){i._isShowAni=!0,i._updatePlayerShow(),i._checkStart()})),this.vsAni.node.active=!1,_.instance.wifiType==E.STAND_ALONE&&(this.btnClose.active=!1)},o.onClose=function(){var e=this;P.instance.showDialog(N.PANEL_NAME.TIP_PANEL,[N.ROOM_TIPS.LEAVE_ROOM_MSG,function(){_.instance.leaveRoom((function(){P.instance.hideDialog(N.PANEL_NAME.READY),P.instance.showTips(N.ROOM_TIPS.LEAVE_ROOM_SUCCESS),e._isFightOpen&&P.instance.showTransition(N.SCENE_NAME.SLECT)}),(function(){P.instance.showTips(N.ROOM_TIPS.LEAVE_ROOM_ERROR)}),!1)}])},o._updatePlayerShow=function(e){for(var i=_.instance.roomPlayers,t=0;t<i.length;t++){var n=i[t];if(e&&""!=e){if(n.playerId==e){var a=0;_.instance.checkIsRoomOwner(n.playerId)||(a=1),this._showPlayerReady(a,!0,n.customPlayerProperties),this._showModel(a)}}else{var o=0;_.instance.checkIsRoomOwner(n.playerId)||(o=1),this._showPlayerReady(o,!0,n.customPlayerProperties),this._showModel(o)}}},o._onOtherJoinRoom=function(e){this._updatePlayerShow(e),this._checkStart()},o._showPlayerReady=function(e,i,t){void 0===t&&(t=""),this.aryPlayerHead[e].node.parent.active=i,this.aryPlayerName[e].node.active=i,this.aryPlayer[e].active=i,this.aryPlayerWait[e].active=!i,""!=t&&(this.aryPlayerName[e].string=t)},o._showModel=function(e){N.READY_PREFAB.BOY_MODEL;var i=this.leftNode;1===e&&(i=this.rightNode,N.READY_PREFAB.GIRL_MODEL),m.instance.playEffect(i,N.READY_PREFAB.JOIN_EFFECT,!0,!0),1===e?this.girlNode.active=!0:this.boyNode.active=!0},o._cleanModel=function(){this.girlNode.active=!1,this.girlNode.active=!1},o._checkStart=function(){this._isShowAni&&(_.instance.roomPlayers.length>=N.MIN_PLAYER&&(P.instance.hideDialog(N.PANEL_NAME.TIP_PANEL),P.instance.hideDialog(N.PANEL_NAME.MEDIA_PANEL),_.instance.mediaLeaveRoom(),_.instance.leaveChannel(),this.animation.off(f.EventType.FINISHED),this.vsAni.node.active=!0,this.vsAni.play(),this.vsAni.once(l.EventType.FINISHED,(function(){P.instance.showTransition(N.SCENE_NAME.FIGHT)}))))},i}(p)).prototype,"animation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(H.prototype,"aryPlayerWait",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=i(H.prototype,"aryPlayer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=i(H.prototype,"aryPlayerName",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=i(H.prototype,"aryPlayerHead",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=i(H.prototype,"aryHead",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=i(H.prototype,"leftNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(H.prototype,"rightNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(H.prototype,"btnClose",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(H.prototype,"txtNum",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(H.prototype,"vsAni",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(H.prototype,"girlNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(H.prototype,"boyNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=H))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/readyGo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./constant.ts"],(function(n){"use strict";var t,e,i,o,r,a,c,u,s,l;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,c=n.AnimationComponent,u=n.Component},function(n){s=n.AudioManager},function(n){l=n.Constant}],execute:function(){var p,f,y,d,h;r._RF.push({},"041fe3DZYROjYR7QMC4Hp5d","readyGo",void 0);var g=a.ccclass,v=a.property;n("readyGo",(p=g("readyGo"),f=v(c),p((h=t((d=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,i(t,"ani",h,o(t)),t}e(t,n);var r=t.prototype;return r.show=function(n){this.ani.play(),this.ani.once(c.EventType.FINISHED,(function(){n&&n()}))},r.tick=function(){s.instance.playSound(l.AUDIO_NAME.TICK)},r.go=function(){s.instance.playSound(l.AUDIO_NAME.GO)},t}(u)).prototype,"ani",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=d))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc"],(function(e){"use strict";var n,t,r,o,i,a,s,f,l,u,c;return{setters:[function(e){n=e.cclegacy,t=e._decorator,r=e.resources,o=e.error,i=e.Prefab,a=e.SpriteFrame,s=e.Texture2D,f=e.assetManager,l=e.instantiate,u=e.find,c=e.isValid}],execute:function(){var d;n._RF.push({},"7844e1bOwZK+7JMYjENQU5v","resourceUtil",void 0);var m=t.ccclass;e("ResourceUtil",m("ResourceUtil")(d=function(){function e(){}return e.loadRes=function(e,n,t){void 0===t&&(t=function(){}),r.load(e,(function(e,n){if(e)return o(e.message||e),void t(e,n);t&&t(null,n)}))},e.loadResType=function(e,n){return new Promise((function(t,i){r.load(e,n,(function(e,n){if(e)return o(e.message||e),void(i&&i(e));t&&t(n)}))}))},e.loadEffectRes=function(e){var n=this;return new Promise((function(t,r){n.loadRes("prefab/effect/"+e,i,(function(n,o){if(n)return console.error("effect load failed",e),void(r&&r());t&&t(o)}))}))},e.loadModelRes=function(e){var n=this;return new Promise((function(t,r){n.loadRes("prefab/model/"+e,i,(function(n,o){if(n)return console.error("model load failed",e),void(r&&r());t&&t(o)}))}))},e.loadModelResArr=function(e,n,t,o){var a=n.map((function(n){return e+"/"+n}));r.load(a,i,t,o)},e.loadSpriteFrameRes=function(e){var n=this;return new Promise((function(t,r){n.loadRes(e,a,(function(n,o){if(n)return console.error("spriteFrame load failed!",e,n),void(r&&r());var i=new s;i.image=o;var f=new a;f.texture=i,t&&t(f)}))}))},e.loadSpriteFrameURL=function(e,n){f.loadRemote(e,(function(t,r){if(t)console.error("spriteFrame load failed!",e,t);else{var o=new s;o.image=r;var i=new a;i.texture=o,n.spriteFrame=i}}))},e.getMap=function(e,n){var t="map";t+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes("map/config/"+t,null,(function(e,t){if(e)n(e,t);else{var r="";if(t._file){window.LZString&&(r=window.LZString.decompressFromEncodedURIComponent(t._file));var o=JSON.parse(r);n(null,o)}else if(t.text){window.LZString&&(r=window.LZString.decompressFromEncodedURIComponent(t.text));o=JSON.parse(r);n(null,o)}else t.json?n(null,t.json):n("failed")}}))},e.getMapObj=function(e,n,t,o){for(var a=[],s=0;s<n.length;s++)a.push("map/"+e+"/"+n[s]);r.load(a,i,t,o)},e.getUIPrefabRes=function(e,n){this.loadRes("prefab/ui/"+e,i,n)},e.createUI=function(e,n,t){this.getUIPrefabRes(e,(function(e,r){if(!e){var o=l(r);o.setPosition(0,0,0);u(t?"Canvas/ui/tip":"Canvas/ui/dislog").addChild(o),n&&n(null,o)}}))},e.getJsonData=function(e,n){this.loadRes("datas/"+e,null,(function(e,t){e?o(e.message||e):t.json?n(e,t.json):n("failed!!!")}))},e.getTextData=function(e,n){this.loadRes("datas/"+e,null,(function(e,t){if(e)o(e.message||e);else{var r=t.text;n(e,r)}}))},e.setSpriteFrame=function(e,n,t){this.loadRes(e+"/spriteFrame",a,(function(r,o){if(r)return console.error("set sprite frame failed! err:",e,r),void t(r);n&&c(n)&&(n.spriteFrame=o,t(null))}))},e.getEffectPrefab=function(e,n){this.loadRes("prefab/effect/"+e+"/"+e,i,n)},e}())||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/select_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gobeUtil.ts","./uiManager.ts","./constant.ts","./playerData.ts","./clientEvent.ts","./util.ts"],(function(n){"use strict";var t,e,i,o,a,s,c,r,l,u,E,N,_,f,h;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,s=n._decorator,c=n.Label,r=n.Node,l=n.Component},function(n){u=n.GobeUtil},function(n){E=n.UIManager},function(n){N=n.Constant},function(n){_=n.PlayerData},function(n){f=n.ClientEvent},function(n){h=n.Util}],execute:function(){var A,p,P,g,m,M,I,R,O,b,D,L,y;a._RF.push({},"fc853N0SWpIK5JIef22aU+J","select_panel",void 0);var T=s.ccclass,C=s.property;n("SelectPanel",(A=T("SelectPanel"),p=C(c),P=C(c),g=C(r),m=C(r),M=C(r),A((O=t((R=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return t=n.call.apply(n,[this].concat(a))||this,i(t,"txtName",O,o(t)),i(t,"txtCoin",b,o(t)),i(t,"btnStrategy",D,o(t)),i(t,"btnCommunity",L,o(t)),i(t,"btnShare",y,o(t)),t}e(t,n);var a=t.prototype;return a.show=function(){var n=this;if(""==_.instance.playerInfo.playerName){var t=_.instance.playerInfo.playerName;h.randomName(t).then((function(t){n.txtName.string=t,_.instance.updatePlayerInfo("playerName",t)}))}else this.txtName.string=_.instance.playerInfo.playerName;E.instance.showDialog(N.PANEL_NAME.MEDIA_PANEL),_.instance.isInit?(u.instance.joinTeamRoom(N.WORLD_ID),u.instance.joinGroupChannel(N.WORLD_ID)):(_.instance.isInit=!0,u.instance.startMedia(u.instance.openId),u.instance.startForumPage()),this._onOpenPgs()},a.onEnable=function(){f.on(N.EVENT_NAME.INIT_MEDIA,this._onInitMedia,this),f.on(N.EVENT_NAME.INIT_CHANNEL,this._onSendChannel,this),f.on(N.EVENT_NAME.OPEN_PGS,this._onOpenPgs,this)},a.onDisable=function(){f.off(N.EVENT_NAME.INIT_MEDIA,this._onInitMedia,this),f.off(N.EVENT_NAME.INIT_CHANNEL,this._onSendChannel,this),f.off(N.EVENT_NAME.OPEN_PGS,this._onOpenPgs,this),E.instance.hideDialog(N.PANEL_NAME.MEDIA_PANEL)},a._onOpenPgs=function(){this.btnCommunity.active=u.instance.isOpenPgs,this.btnStrategy.active=u.instance.isOpenPgs&&u.instance.isHwLogin,this.btnShare.active=u.instance.isOpenPgs&&u.instance.isHwLogin},a._onInitMedia=function(){u.instance.joinTeamRoom(N.WORLD_ID)},a._onSendChannel=function(){u.instance.joinGroupChannel(N.WORLD_ID)},a.onOpenForumPage=function(){u.instance.openForumPage()},a.onForumPageCheckScene=function(){u.instance.forumPageCheckScene()},a.onForumPagePublish=function(){u.instance.forumPagePublish()},a.onCreateRoomAi=function(){u.instance.createRoomAI((function(){E.instance.showDialog(N.PANEL_NAME.READY)}),(function(){E.instance.showTips(N.ROOM_TIPS.CREATE_ROOM_ERROR)}))},a.onCreateRoom=function(){u.instance.createRoom((function(){E.instance.showDialog(N.PANEL_NAME.READY)}),(function(){E.instance.showTips(N.ROOM_TIPS.CREATE_ROOM_ERROR)}))},a.onJoinRoom=function(){E.instance.showDialog(N.PANEL_NAME.JOIN_ROOM_PANEL,[function(){}])},a.onMatchRoom=function(){E.instance.showDialog(N.PANEL_NAME.MATCH_PANEL),u.instance.matchRoom((function(){E.instance.showDialog(N.PANEL_NAME.READY),E.instance.showTips(N.ROOM_TIPS.JOIN_ROOM_SUCCESS),E.instance.hideDialog(N.PANEL_NAME.MATCH_PANEL)}),(function(){}))},a.onLeaveClient=function(){E.instance.showDialog(N.PANEL_NAME.TIP_PANEL,[N.ROOM_TIPS.LEAVE_GAME,function(){u.instance.leaveGame(),E.instance.hideDialog(N.PANEL_NAME.SELECT_GAME),E.instance.showDialog(N.PANEL_NAME.START_GAME)}])},t}(l)).prototype,"txtName",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(R.prototype,"txtCoin",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(R.prototype,"btnStrategy",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(R.prototype,"btnCommunity",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(R.prototype,"btnShare",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=R))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/select.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./audioManager.ts","./gobeUtil.ts","./uiManager.ts","./constant.ts","./util.ts"],(function(e){"use strict";var t,n,a,r,i,o,c,s,l,u,f,p,m,y,d,b,g,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,c=e.Prefab,s=e.game,l=e.input,u=e.Input,f=e.sys,p=e.Component},function(e){m=e.PlayerData},function(e){y=e.AudioManager},function(e){d=e.GobeUtil},function(e){b=e.UIManager},function(e){g=e.Constant},function(e){h=e.Util}],execute:function(){var M,E,S,I,P;i._RF.push({},"8b298SqbKtNt6VNWASLCbB4","select",void 0);var v=o.ccclass,A=o.property;e("Select",(M=v("Select"),E=A([c]),M((P=t((I=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,a(t,"backPrefabs",P,r(t)),t}return n(t,e),t.prototype.start=function(){if(0==m.instance.isInit){s.frameRate=30,y.instance.init(),m.instance.loadFromCache();var e=m.instance.playerInfo.playerId;if(null==e){e="cocos"+(new Date).getTime().toString().substring(6);var t=Math.floor(2*Math.random());m.instance.createPlayerInfo({playerId:e,playerName:"",score:0,icon:Math.floor(10*Math.random()),staticId:t}),h.randomName(t).then((function(e){m.instance.updatePlayerInfo("playerName",e)}))}l.once(u.EventType.TOUCH_END,(function(){if(f.isBrowser&&document.documentElement){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()}}),this)}""==d.instance.ownPlayerId?b.instance.showDialog(g.PANEL_NAME.START_GAME):b.instance.showDialog(g.PANEL_NAME.SELECT_GAME)},t}(p)).prototype,"backPrefabs",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=I))||S));i._RF.pop()}}}));

System.register("chunks:///_virtual/start_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./constant.ts","./gobeUtil.ts","./playerData.ts","./clientEvent.ts"],(function(i){"use strict";var t,n,e,a,o,s,c,r,l,u,_,h,A,p,E;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){o=i.cclegacy,s=i._decorator,c=i.sp,r=i.Node,l=i.Animation,u=i.Component},function(i){_=i.UIManager},function(i){h=i.Constant},function(i){A=i.GobeUtil},function(i){p=i.PlayerData},function(i){E=i.ClientEvent}],execute:function(){var I,f,d,N,S,R,b,G,v,O,w;o._RF.push({},"f6580Lq5TpAaIPe8RrEU5Gp","start_panel",void 0);var g=s.ccclass,y=s.property;i("StartPanel",(I=g("StartPanel"),f=y(c.Skeleton),d=y(r),N=y(r),S=y(l),I((G=t((b=function(i){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=i.call.apply(i,[this].concat(o))||this,e(t,"startSk",G,a(t)),e(t,"btnNode",v,a(t)),e(t,"btnNodeHw",O,a(t)),e(t,"loadAni",w,a(t)),t._isClick=!1,t}n(t,i);var o=t.prototype;return o.show=function(){var i=this;this.loadAni.node.active=!1,this.loadAni.stop(),this.startSk.setAnimation(0,"start",!1),this.startSk.addAnimation(0,"idle",!0),this.btnNode.active=!1,this.btnNodeHw.active=!1,setTimeout((function(){i.btnNode.active=!0,A.instance.isHwInit&&(i.btnNodeHw.active=!0)}),1500),A.instance.isHwInit||A.instance.initHuawei()},o.onEnable=function(){E.on(h.EVENT_NAME.HUAWEI_LOGIN_MSG,this._initSuccess,this)},o.onDisable=function(){E.off(h.EVENT_NAME.HUAWEI_LOGIN_MSG,this._initSuccess,this)},o._initSuccess=function(i,t){i==h.HUAWEI_LOGIN.SIGN_IN_SUCCESS?(A.instance.isHwLogin=!0,this._loginGame()):i==h.HUAWEI_LOGIN.INIT_SUCCESS?this.btnNodeHw.active=!0:i==h.HUAWEI_LOGIN.INIT_UNDER_AGE||i==h.HUAWEI_LOGIN.INIT_ERROR||i==h.HUAWEI_LOGIN.SIGN_IN_ERROR&&(_.instance.showTips(h.ROOM_TIPS.HUA_WEI_LOAGIN_ERROR),this.loadAni.node.active=!1,this.loadAni.stop(),this._isClick=!1)},o.onStartGameHW=function(){this._isClick||(this._isClick=!0,this.loadAni.node.active=!0,this.loadAni.play(),A.instance.hwSignIn())},o.onStartGame=function(){this._isClick||(this._isClick=!0,this.loadAni.node.active=!0,this.loadAni.play(),this._loginGame())},o._loginGame=function(){var i=this;if(A.instance.isChangeWifiType){var t=p.instance.playerInfo.playerId;A.instance.initSDK(t,(function(t){t?(_.instance.showDialog(h.PANEL_NAME.SELECT_GAME),_.instance.hideDialog(h.PANEL_NAME.START_GAME)):_.instance.showTips(h.ROOM_TIPS.LOGIN_GAME_ERROR),i.loadAni.node.active=!1,i.loadAni.stop(),i._isClick=!1}))}else A.instance.createRoomAI((function(){_.instance.showDialog(h.PANEL_NAME.READY)}),(function(){_.instance.showTips(h.ROOM_TIPS.CREATE_ROOM_ERROR)}))},t}(u)).prototype,"startSk",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(b.prototype,"btnNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(b.prototype,"btnNodeHw",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(b.prototype,"loadAni",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=b))||R));o._RF.pop()}}}));

System.register("chunks:///_virtual/staticBatch.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,c,n,a,o,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,c=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,o=t.Node,s=t.BatchingUtility,u=t.Component}],execute:function(){var l,h,p,f,d;n._RF.push({},"d5c7e+7srFCRZQfAJvjyREK","staticBatch",void 0);var y=a.ccclass,B=a.property;t("StaticBatch",(l=y("StaticBatch"),h=B([o]),l((d=e((f=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"needBatches",d,c(e)),e}return i(e,t),e.prototype.start=function(){var t=this;this.needBatches.forEach((function(e){s.batchStaticModel(e,t.node)}))},e}(u)).prototype,"needBatches",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=f))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/storageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts"],(function(t){"use strict";var a,s,e,n,i,o,r;return{setters:[function(t){a=t.createClass},function(t){s=t.cclegacy,e=t._decorator,n=t.sys,i=t.native,o=t.log},function(t){r=t.Util}],execute:function(){var c,h;s._RF.push({},"5689348bSJGyYo12WGa6eeJ","storageManager",void 0);var u=e.ccclass;e.property,t("StorageManager",u("StorageManager")(((h=function(){function t(){this._jsonData={},this._path=null,this.KEY_CONFIG="template",this._markSave=!1,this._saveTimer=-1}var s=t.prototype;return s.start=function(){var t;(this._jsonData={userId:""},this._path=this._getConfigPath(),n.isNative)?t=i.fileUtils.getValueMapFromFile(this._path)[this.KEY_CONFIG]:t=n.localStorage.getItem(this.KEY_CONFIG);if(o("content",t),t&&t.length){t.startsWith("@")&&(t=t.substring(1),t=r.decrypt(t));try{var a=JSON.parse(t);o("content1",a),this._jsonData=a}catch(t){}}},s.setConfigDataWithoutSave=function(t,a){var s=this._jsonData.userId;this._jsonData[s]?this._jsonData[s][t]=a:console.error("no account can not save"),this.save()},s.setConfigData=function(t,a){this.setConfigDataWithoutSave(t,a),this._markSave=!0},s.getConfigData=function(t){var a=this._jsonData.userId;if(this._jsonData[a]){var s=this._jsonData[a][t];return s||""}return o("no account can not load"),""},s.setGlobalData=function(t,a){this._jsonData[t]=a,this.save()},s.getGlobalData=function(t){return this._jsonData[t]},s.setUserId=function(t){this._jsonData.userId=t,this._jsonData[t]||(this._jsonData[t]={}),this.save()},s.getUserId=function(){return this._jsonData.userId},s.scheduleSave=function(){this._markSave&&this.save()},s.markModified=function(){this._markSave=!0},s.save=function(){var t=JSON.stringify(this._jsonData),a="@"+r.encrypt(t);if(this._markSave=!1,n.isNative){var s={};s[this.KEY_CONFIG]=a,i.fileUtils.writeValueMapToFile(s,this._path)}else{n.localStorage.setItem(this.KEY_CONFIG,a)}},s._getConfigPath=function(){var t=n.platform,a="";return t===n.OS.WINDOWS?a="src/conf":t===n.OS.LINUX?a="./conf":n.isNative?(a=i.fileUtils.getWritablePath(),a+="conf"):a="src/conf",a},a(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}}]),t}())._instance=void 0,c=h))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/tip_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./constant.ts"],(function(t){"use strict";var n,i,e,a,r,c,o,l,s,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,o=t.Label,l=t.Component},function(t){s=t.UIManager},function(t){p=t.Constant}],execute:function(){var u,f,h,_,g;r._RF.push({},"a8b69ytN4pOUJe92nK307gC","tip_panel",void 0);var b=c.ccclass,y=c.property;t("TipPanel",(u=b("TipPanel"),f=y(o),u((g=n((_=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return n=t.call.apply(t,[this].concat(r))||this,e(n,"txtTip",g,a(n)),n._callback=null,n}i(n,t);var r=n.prototype;return r.show=function(t,n){this.txtTip.string=t,this._callback=n},r.onOk=function(){this._callback&&this._callback(),s.instance.hideDialog(p.PANEL_NAME.TIP_PANEL)},r.onCancel=function(){s.instance.hideDialog(p.PANEL_NAME.TIP_PANEL)},n}(l)).prototype,"txtTip",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=_))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/tips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts"],(function(t){"use strict";var e,n,i,o,s,r,a,p,l,c,u,h,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.LabelComponent,p=t.Vec3,l=t.UITransform,c=t.isValid,u=t.AnimationComponent,h=t.Component},function(t){d=t.PoolManager}],execute:function(){var f,g,v,y,m;s._RF.push({},"a91d7M56W1FG4vm4cXb+REy","tips",void 0);var b=r.ccclass,T=r.property;t("Tips",(f=b("Tips"),g=T(a),f((m=e((y=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(e,"lbTips",m,o(e)),e.targetPos=void 0,e}return n(e,t),e.prototype.show=function(t,e){var n,i,o=this;this.targetPos=new p(0,0,0),this.node.setPosition(this.targetPos),this.lbTips.string=t;var s=null==(n=this.lbTips.node.getComponent(l))?void 0:n.contentSize;if(c(s)){null==(i=this.node.getComponent(l))||i.setContentSize(s.width+100<240?240:s.width+100,s.height+30);var r=this.node.getComponent(u);r.play(),r.once(u.EventType.FINISHED,(function(){e&&e(),d.instance.putNode(o.node)}))}else d.instance.putNode(this.node)},e}(h)).prototype,"lbTips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/transition_bg_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts"],(function(n){"use strict";var t,i,e,o,a,r,s,c,l,p;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,e=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,s=n.AnimationComponent,c=n.director,l=n.Component},function(n){p=n.PoolManager}],execute:function(){var u,I,N,d,T,f;a._RF.push({},"6c0e1Yz4RlHS5dVcNj0bXBe","transition_bg_panel",void 0);var y=r.ccclass,h=r.property;n("TransitionBgPanel",(u=y("TransitionBgPanel"),I=h(s),u(((f=function(n){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,e(t,"animation",T,o(t)),t}return i(t,n),t.prototype.show=function(n){var i=this;c.addPersistRootNode(this.node),this.animation.play(t.TRANSITION_IN),this.animation.once(s.EventType.FINISHED,(function(){i.animation.play(t.TRANSITION_OUT),i.animation.once(s.EventType.FINISHED,(function(){c.removePersistRootNode(i.node),p.instance.putNode(i.node),n&&n()}))}))},t}(l)).TRANSITION_IN="transitionIn",f.TRANSITION_OUT="transitionOut",T=t((d=f).prototype,"animation",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=d))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/transition_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./clientEvent.ts","./constant.ts"],(function(n){"use strict";var t,e,i,o,a,r,s,c,l,u,p,N;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,s=n.AnimationComponent,c=n.director,l=n.Component},function(n){u=n.PoolManager},function(n){p=n.ClientEvent},function(n){N=n.Constant}],execute:function(){var _,d,f,v,h,T;a._RF.push({},"958f1KcNipDeqKgkqWmPTox","transition_panel",void 0);var m=r.ccclass,I=r.property;n("TransitionPanel",(_=m("TransitionPanel"),d=I(s),_(((T=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,i(t,"animation",h,o(t)),t._loadSceneOver=!1,t._sceneName="",t}e(t,n);var a=t.prototype;return a.show=function(n){var e=this;this._sceneName=n,c.addPersistRootNode(this.node),this._loadSceneOver=!1,this.animation.play(t.TRANSITION_IN),c.preloadScene(N.SCENE_NAME.SLECT,(function(){e._loadSceneOver=!0,e._transitionOut()}))},a._transitionOut=function(){if(this._loadSceneOver){var n=this;c.loadScene(this._sceneName,(function(){n.animation.play(t.TRANSITION_OUT),n.animation.once(s.EventType.FINISHED,(function(){c.removePersistRootNode(n.node),u.instance.putNode(n.node),p.dispatchEvent(N.EVENT_NAME.ON_GAME_321)}))}))}},t}(l)).TRANSITION_IN="transitionIn",T.TRANSITION_OUT="transitionOut",h=t((v=T).prototype,"animation",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=v))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts","./poolManager.ts","./tips.ts","./constant.ts","./transition_panel.ts","./transition_bg_panel.ts"],(function(i){"use strict";var t,n,o,e,a,s,r,p,c,h,u;return{setters:[function(i){t=i.createClass},function(i){n=i.cclegacy,o=i._decorator,e=i.isValid,a=i.find},function(i){s=i.ResourceUtil},function(i){r=i.PoolManager},function(i){p=i.Tips},function(i){c=i.Constant},function(i){h=i.TransitionPanel},function(i){u=i.TransitionBgPanel}],execute:function(){var l,f;n._RF.push({},"f9384FYDp5GqoW+CtrCla3U","uiManager",void 0);var g=o.ccclass;o.property,i("UIManager",g("UIManager")(((f=function(){function i(){this._dictSharedPanel={},this._dictLoading={},this._arrPopupDialog=[],this._showTipsTime=0}var n=i.prototype;return n.isDialogVisible=function(i){if(!this._dictSharedPanel.hasOwnProperty(i))return!1;var t=this._dictSharedPanel[i];return e(t)&&t.active&&t.parent},n.showDialog=function(i,t,n,o){var r=this;if(!this._dictLoading[i]){var p=i.lastIndexOf("/"),c=i.slice(p+1);if(t||(t=[]),this._dictSharedPanel.hasOwnProperty(i)){var h=this._dictSharedPanel[i];if(e(h)){var u=null;u=a(o?"Canvas/ui/tip":"Canvas/ui/dislog"),h.parent=u,h.active=!0;var l=h.getComponent(c),f=h.getComponent(c.charAt(0).toUpperCase()+c.slice(1));if(l&&l.show)l.show.apply(l,t),n&&n(l);else{if(!f||!f.show)throw"查找不到脚本文件"+c;f.show.apply(f,t),n&&n(f)}return}}this._dictLoading[i]=!0,s.createUI(i,(function(o,e){var a=!1;if(r._dictLoading[i]||(a=!0),r._dictLoading[i]=!1,o)console.error(o);else{r._dictSharedPanel[i]=e;var s=e.getComponent(c),p=e.getComponent(c.charAt(0).toUpperCase()+c.slice(1));if(s&&s.show)s.show.apply(s,t),n&&n(s);else{if(!p||!p.show)throw"查找不到脚本文件"+c;p.show.apply(p,t),n&&n(p)}a&&r.hideDialog(i)}}),o)}},n.hideDialog=function(i,t){if(this._dictSharedPanel.hasOwnProperty(i)){var n=this._dictSharedPanel[i];if(n&&e(n)){var o=n.getComponent("animationUI");o?o.close((function(){n.parent=null,t&&"function"==typeof t&&t()})):(n.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._dictLoading[i]=!1},n.pushToPopupSeq=function(i,t,n){var o={panelPath:i,scriptName:t,param:n,isShow:!1};this._arrPopupDialog.push(o),this._checkPopupSeq()},n.insertToPopupSeq=function(i,t,n){var o={panelPath:t,param:n,isShow:!1};this._arrPopupDialog.splice(i,0,o)},n.shiftFromPopupSeq=function(i){var t=this;this.hideDialog(i,(function(){t._arrPopupDialog[0]&&t._arrPopupDialog[0].panelPath===i&&(t._arrPopupDialog.shift(),t._checkPopupSeq())}))},n._checkPopupSeq=function(){if(this._arrPopupDialog.length>0){var i=this._arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this._arrPopupDialog[0].isShow=!0)}},n.showTips=function(i,t){var n=this,o=String(i),e=function(){n._showTipsAni(o,t)},a=Date.now();if(a-this._showTipsTime<800){var s=800-(a-this._showTipsTime);setTimeout((function(){e()}),s),this._showTipsTime=a+s}else e(),this._showTipsTime=a},n._showTipsAni=function(i,t){s.getUIPrefabRes("common/tips",(function(n,o){n||r.instance.getNode(o,a("Canvas")).getComponent(p).show(i,t)}))},n.showTransition=function(i){s.getUIPrefabRes(c.PANEL_NAME.TRANSITION,(function(t,n){t||r.instance.getNode(n,a("")).getComponent(h).show(i)}))},n.showTransitionBg=function(i){s.getUIPrefabRes(c.PANEL_NAME.TRANSITION_BG,(function(t,n){t||r.instance.getNode(n,a("Canvas/ui/tip")).getComponent(u).show(i)}))},t(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}())._instance=void 0,l=f))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts"],(function(r){"use strict";var e,t,n,o,a,i,f;return{setters:[function(r){e=r.asyncToGenerator,t=r.regeneratorRuntime},function(r){n=r.cclegacy,o=r._decorator,a=r.randomRange,i=r.JsonAsset},function(r){f=r.ResourceUtil}],execute:function(){var u;n._RF.push({},"51238kLGAFBiLoz3gxcwxtH","util",void 0);var h=o.ccclass;o.property,r("Util",h("Util")(u=function(){function r(){}return r.clone=function(r){if(null===r||"object"!=typeof r)return r;var e={};for(var t in r.constructor===Array&&(e=[]),r)r.hasOwnProperty(t)&&(e[t]=this.clone(r[t]));return e},r.objectToArray=function(r){var e=[];for(var t in r)r.hasOwnProperty(t)&&e.push(r[t]);return e},r.arrayToObject=function(r,e){var t={};for(var n in r)r.hasOwnProperty(n)&&r[n][e]&&(t[r[n][e]]=r[n]);return t},r.getWeightRandIndex=function(r,e){for(var t=Math.floor(Math.random()*e),n=0,o=0;o<r.length&&!(t<(n+=r[o]));o++);return o},r.getRandomNFromM=function(r,e){for(var t=[],n=0,o=0;o<e&&!(o>=r+1);){n=this.getRandomInt(0,r);for(var a=0,i=0;i<o;i++)if(t[i]===n){a=1;break}0===a&&(t[o]=n,o++)}return t},r.getRandomInt=function(r,e){var t=Math.random()*(e-r+1)+r;return Math.floor(t)},r.getStringLength=function(r){for(var e=r,t=0,n=0,o=e.length;n<o;n++){t+=e.charCodeAt(n)<=255?1:2}return Math.ceil(t/2)},r.isEmptyObject=function(r){var e=!0;if(r&&r.constructor===Object){for(var t in r)if(r.hasOwnProperty(t)){e=!1;break}}else e=!1;return e},r.isNewDay=function(r){var e=new Date(r),t=new Date,n=e.getYear(),o=e.getMonth(),a=e.getDate(),i=t.getYear(),f=t.getMonth(),u=t.getDate();return i>n||(f>o||u>a)},r.getPropertyCount=function(r){var e,t=0;for(e in r)r.hasOwnProperty(e)&&t++;return t},r.difference=function(r,e){var t=[];if(r.constructor!==Array||e.constructor!==Array)return t;for(var n=r.length,o=0;o<n;o++)-1===e.indexOf(r[o])&&t.push(r[o]);return t},r._stringToArray=function(r){var e,t="\\ufe0e\\ufe0f",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",o=RegExp("[\\u200d\\ud800-\\udfff"+n+t+"]"),a="\\ud83c[\\udffb-\\udfff]",i="[\\ufe0e\\ufe0f]?",f="["+n+"]",u="(?:"+f+"|"+a+")"+"?",h="[\\ud800-\\udfff]",c="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",d=i+u+("(?:\\u200d(?:"+[c,s,g].join("|")+")"+i+u+")*"),l="(?:"+[c+f+"?",f,s,g,h].join("|")+")",v=RegExp(a+"(?="+a+")|"+l+d,"g");return e=r,o.test(e)?function(r){return r.match(v)||[]}(r):function(r){return r.split("")}(r)},r.simulationUUID=function(){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()},r.trim=function(r){return r.replace(/(^\s*)|(\s*$)/g,"")},r.isNowValid=function(r,e){var t=new Date(r),n=new Date(e),o=!1;if(t.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var a=new Date;o=a<n&&a>t}return o},r.getDeltaDays=function(r,e){r=new Date(r),e=new Date(e);var t=r.getFullYear(),n=r.getMonth()+1,o=r.getDate(),a=e.getFullYear(),i=e.getMonth()+1,f=e.getDate();r=new Date(t+"/"+n+"/"+o+" GMT+0800").getTime();var u=(e=new Date(a+"/"+i+"/"+f+" GMT+0800").getTime())-r;return Math.floor(u/864e5)},r.getMin=function(r){var e=null;if(r.constructor===Array)for(var t=r.length,n=0;n<t;n++)e=0===n?Number(r[0]):e>Number(r[n])?Number(r[n]):e;return e},r.formatTwoDigits=function(r){return(Array(2).join(0)+r).slice(-2)},r.formatDate=function(r,e){var t={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},r.getDay=function(){var r=new Date;return r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()},r.formatName=function(r,e){e=e||6;var t=this._stringToArray(r),n="";if(t.length>e){for(var o=0;o<e;o++)n+=t[o];n+="..."}else n=r;return n},r.formatMoney=function(r){for(var e=["","K","M","G","T","P","E","Z","Y","B","N","D"],t="",n=0;n<e.length;n++){if(!(r>=1e4)){t=Math.floor(r)+e[n];break}r/=1e3}return""===t&&(t=Math.floor(r)+"U"),t},r.formatValue=function(r){for(var e=[],t="",n=0;n<26;n++)e.push(String.fromCharCode(97+n));for(var o=0;o<e.length;o++){if(!(r>=1e4)){t=Math.floor(r)+e[o];break}r/=1e3}return t},r.formatTimeForSecond=function(r,e,t,n){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1);var o="",a=r%60,i=Math.floor(r/60);i=i<0?0:i;var f=Math.floor(i/60),u=i%60;return e||(f>0?(o+=f>9?f.toString():"0"+f,o+=":"):o+="00:"),t||(o+=u>9?u.toString():"0"+u,o+=":"),n||(o+=a>9?a.toString():"0"+a),o},r.formatTimeForMillisecond=function(r){var e=Math.floor(r/1e3%60),t=Math.floor(r/1e3/60%60);return{hour:Math.floor(r/1e3/60/60),minute:t,second:e}},r.rand=function(r){for(var e=this.clone(r),t=e.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),o=e[n];e[n]=e[t],e[t]=o}return e},r.getOffsetMimutes=function(r,e){var t=e-r;return Math.floor(t%36e5/6e4)},r.formatNumToFixed=function(r,e){return void 0===e&&(e=0),Number(r.toFixed(e))},r.lerp=function(r,e,t){void 0===t&&(t=.25);var n=e;return r>e?n=e+(r-e)*t:r<e&&(n=e-(e-r)*t),n},r.decrypt=function(r){var e=6;r.length%2==0&&(e=7);for(var t="",n=0;n<r.length-e;n+=2)t+=r[n+1],t+=r[n];return t+=r.slice(r.length-e+1),t=this._base64Decode(t)},r.encrypt=function(r){var e=this._base64encode(r),t=6;e.length%2==0&&(t=7);for(var n="",o=0;o<(e.length-t+1)/2;o++)n+=e[2*o+1],n+=e[2*o];return n+=e.slice(e.length-t+1)},r._base64encode=function(r){var e,t,n,o,a,i,f,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",c=0;for(r=this._utf8Encode(r);c<r.length;)o=(e=r.charCodeAt(c++))>>2,a=(3&e)<<4|(t=r.charCodeAt(c++))>>4,i=(15&t)<<2|(n=r.charCodeAt(c++))>>6,f=63&n,isNaN(t)?i=f=64:isNaN(n)&&(f=64),h=h+u.charAt(o)+u.charAt(a)+u.charAt(i)+u.charAt(f);return h},r._utf8Encode=function(r){r=r.replace(/\r\n/g,"\n");for(var e="",t=0;t<r.length;t++){var n=r.charCodeAt(t);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},r._utf8Decode=function(r){for(var e="",t=0,n=0,o=0,a=0;t<r.length;)(n=r.charCodeAt(t))<128?(e+=String.fromCharCode(n),t++):n>191&&n<224?(o=r.charCodeAt(t+1),e+=String.fromCharCode((31&n)<<6|63&o),t+=2):(o=r.charCodeAt(t+1),a=r.charCodeAt(t+2),e+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),t+=3);return e},r._base64Decode=function(r){var e,t,n,o,a,i,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",h=0;for(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<r.length;)e=f.indexOf(r.charAt(h++))<<2|(o=f.indexOf(r.charAt(h++)))>>4,t=(15&o)<<4|(a=f.indexOf(r.charAt(h++)))>>2,n=(3&a)<<6|(i=f.indexOf(r.charAt(h++))),u+=String.fromCharCode(e),64!=a&&(u+=String.fromCharCode(t)),64!=i&&(u+=String.fromCharCode(n));return u=this._utf8Decode(u)},r.checkIsLowPhone=function(){if(window.wx){var r=-1,e=window.wx.getSystemInfoSync();if(e.system.indexOf("iOS")>=0){for(var t=e.model,n=["iPhone1,1","iPhone1,2","iPhone2,1","iPhone3,1","iPhone3,3","iPhone4,1","iPhone5,1","iPhone5,2","iPhone5,3","iPhone5,4","iPhone6,1","iPhone6,2"],o=["iPhone6,2","iPhone7,1","iPhone7,2","iPhone8,1","iPhone8,2","iPhone8,4"],a=["iPhone9,1","iPhone9,2","iPhone9,3","iPhone9,4","iPhone10,1","iPhone10,2","iPhone10,3","iPhone10,4","iPhone10,5","iPhone10,6"],i=["iPhone11,2","iPhone11,4","iPhone11,6","iPhone11,8","iPhone12,1","iPhone12,3","iPhone12,5","iPhone12,8"],f=0;f<n.length;f++)t.indexOf(n[f])>=0&&(r=5);for(var u=0;u<o.length;u++)t.indexOf(o[u])>=0&&(r=10);for(var h=0;h<a.length;h++)t.indexOf(a[h])>=0&&(r=20);for(var c=0;c<i.length;c++)t.indexOf(i[c])>=0&&(r=30)}else r=e.benchmarkLevel;return r<22}return!1},r.getTwoNodeXZLength=function(r,e,t){void 0===t&&(t=!1);var n=t?r.position.x:r.worldPosition.x,o=t?r.position.z:r.worldPosition.z,a=t?e.position.x:e.worldPosition.x,i=t?e.position.z:e.worldPosition.z;return this.getTwoPosXZLength(n,o,a,i)},r.getTwoPosXZLength=function(r,e,t,n){var o=r-t,a=e-n;return Math.sqrt(o*o+a*a)},r.distance=function(r,e,t){return Math.sqrt(r*r+e*e+t*t)},r.createRandomName=function(){for(var r="",e=0;e<Math.round(3*Math.random())+1;e++)r+=String.fromCharCode(Math.round(26*Math.random())+97),r+=String.fromCharCode(Math.round(20901*Math.random())+19968),Math.random()>.5&&(r=r.split("").reverse().join(""));return r},r.randomName=function(){var r=e(t().mark((function r(e){var n,o,u,h,c,s,g;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.loadResType("jsons/names",i);case 2:return n=r.sent,o=n.json.firstnames,u=n.json.boyNames,h=n.json.girlNames,c="",c=0==e?u[Math.floor(a(0,1)*u.length)]:h[Math.floor(a(0,1)*h.length)],s=o[Math.floor(a(0,1)*o.length)],g=s+c,r.abrupt("return",g);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),r}())||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/virtualPlayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gobeUtil.ts"],(function(t){"use strict";var e,n,i,o,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.Vec3,s=t.Component},function(t){c=t.GobeUtil}],execute:function(){var r;n._RF.push({},"f0cd5+RWG1J8pckW7ASsdKo","virtualPlayer",void 0);var l=i.ccclass;t("VirtualPlayer",l("VirtualPlayer")(r=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._curAngleY=0,e._vec3_0=new o,e._angle_0=new o,e._next_vec3_0=new o,e}e(n,t);var i=n.prototype;return i.init=function(t){this._curAngleY=0,this._vec3_0.set(t)},i.playAction=function(t){this._curAngleY=t.angleY,this._vec3_0.set(t.posX,0,t.posZ),this._angle_0.set(0,this._curAngleY,0)},i.playActionRecovery=function(){this.node.setRotationFromEuler(this._angle_0),this.node.setPosition(this._vec3_0)},i.updateState=function(t,e){o.lerp(this._next_vec3_0,this.node.position,this._vec3_0,.2),this.node.setRotationFromEuler(this._angle_0),this.node.setPosition(this._next_vec3_0),t.channel.openId==c.instance.ownPlayerId?e.propLogic.handleProp(t,this.node,!1):c.instance.isAi&&e.propLogic.handleProp(t,this.node,!0)},n}(s))||r);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});